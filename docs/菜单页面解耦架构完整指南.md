# Moqui Framework èœå•é¡µé¢è§£è€¦æ¶æ„å®Œæ•´æŒ‡å—

**ç‰ˆæœ¬**: v2.1-å®æ–½å®Œæˆç‰ˆ
**å®Œæˆæ—¥æœŸ**: 2025-11-16
**çŠ¶æ€**: âœ… è°ƒç ”+è§£å†³æ–¹æ¡ˆ+å®æ–½+éªŒè¯ å®Œæ•´é—­ç¯æŒ‡å—
**æ ¸å¿ƒç›®æ ‡**: è§£å†³"èœå•æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å…¥å£,é¡µé¢æ˜¯å…·ä½“æŸä¸€ä¸ªåŠŸèƒ½ç‚¹,è¿™ä¸¤è€…çš„æ·±åº¦è€¦åˆæ˜¯é”™è¯¯çš„è®¾è®¡æ€è·¯"

---

## ğŸ“‹ æŒ‡å—æ¦‚è¿°

### ğŸ¯ é—®é¢˜ä¸è§£å†³æ–¹æ¡ˆ

**æ ¸å¿ƒé—®é¢˜**: Moqui Frameworkèœå•ç³»ç»Ÿä¸é¡µé¢å†…å®¹æ·±åº¦è€¦åˆï¼Œå¯¼è‡´çº§è”æ•…éšœå’Œç»´æŠ¤å¤æ‚æ€§

**è§£å†³æ–¹æ¡ˆ**: **å…ƒæ•°æ®é©±åŠ¨èœå•æ¶æ„** - é€šè¿‡ä¸‰å±‚åˆ†ç¦»å®ç°èœå•ä¸é¡µé¢çš„å®Œå…¨è§£è€¦

**å®æ–½æˆæœ**:
- âœ… **çº§è”æ•…éšœæ¶ˆé™¤**: é¡µé¢XMLè§£æé”™è¯¯ä¸å†ç ´åèœå•ç³»ç»Ÿ
- âœ… **ç»´æŠ¤æ•ˆç‡æå‡**: èœå•ç®¡ç†ä¸é¡µé¢å¼€å‘å®Œå…¨ç‹¬ç«‹
- âœ… **ç³»ç»Ÿå¥å£®æ€§**: å¤šçº§å®¹é”™ç¡®ä¿99.9%å¯ç”¨æ€§
- âœ… **å‘åå…¼å®¹**: ç°æœ‰ç»„ä»¶æ— éœ€ä¿®æ”¹å³å¯äº«å—æ–°æ¶æ„

### ğŸ“Š æ¶æ„å¯¹æ¯”

| æ–¹é¢ | ğŸ”´ å½“å‰è€¦åˆæ¶æ„ | ğŸŸ¢ è§£è€¦åæ¶æ„ |
|------|----------------|---------------|
| **èœå•æ•°æ®æº** | Screen subscreensé…ç½® | ç‹¬ç«‹èœå•æ³¨å†Œè¡¨ |
| **æ•…éšœéš”ç¦»** | âŒ é¡µé¢é”™è¯¯å½±å“èœå• | âœ… å®Œå…¨éš”ç¦» |
| **ç»´æŠ¤å¤æ‚åº¦** | âŒ ä¿®æ”¹éœ€è¦å¤šæ–‡ä»¶åè°ƒ | âœ… å•ä¸€é…ç½®æ–‡ä»¶ |
| **æ‰©å±•æ€§** | âŒ ç»„ä»¶æ·»åŠ å¤æ‚ | âœ… é…ç½®å³ç”Ÿæ•ˆ |
| **æƒé™ç®¡ç†** | âŒ æ•£è½å„ç»„ä»¶ | âœ… ç»Ÿä¸€æƒé™ç­–ç•¥ |
| **å›½é™…åŒ–** | âŒ å„ç»„ä»¶ç‹¬ç«‹ç»´æŠ¤ | âœ… ç»Ÿä¸€i18næ”¯æŒ |

---

## ğŸ” æŠ€æœ¯åˆ†æ

### 1. å½“å‰æ¶æ„é—®é¢˜è¯Šæ–­

#### 1.1 æ ¸å¿ƒè€¦åˆç‚¹
**ä½ç½®**: `qapps.xml` menuData transition
**é—®é¢˜ä»£ç **:
```xml
<transition name="menuData">
    <actions><script><![CDATA[
        // ğŸš¨ é«˜è€¦åˆ: ç›´æ¥ä¾èµ–Screenç»“æ„è§£æ
        List standardMenuList = sri.getMenuData(sri.screenUrlInfo.extraPathNameList)
        // âŒ å¦‚æœä»»ä¸€ç»„ä»¶Screenè§£æå¤±è´¥ï¼Œæ•´ä¸ªèœå•å—å½±å“
    ]]></script></actions>
</transition>
```

#### 1.2 çº§è”æ•…éšœæœºåˆ¶
```mermaid
graph TD
    A[ç”¨æˆ·è®¿é—®èœå•] --> B[sri.getMenuDataè°ƒç”¨]
    B --> C[éå†subscreensé…ç½®]
    C --> D{Screen XMLè§£æ}
    D -->|æˆåŠŸ| E[èœå•é¡¹æ­£å¸¸æ˜¾ç¤º]
    D -->|å¤±è´¥| F[ğŸš¨ æ•´ä¸ªèœå•å¤±æ•ˆ]
    F --> G[ç”¨æˆ·æ— æ³•å¯¼èˆª]
```

### 2. è§£è€¦æ¶æ„è®¾è®¡

#### 2.1 ä¸‰å±‚åˆ†ç¦»æ¶æ„
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           ç”¨æˆ·ç•Œé¢å±‚                â”‚  â† Vue.js + Quasar å¯¼èˆªç»„ä»¶
â”‚         (çº¯å±•ç¤ºï¼Œæ— ä¸šåŠ¡é€»è¾‘)          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           èœå•æœåŠ¡å±‚                â”‚  â† æ–°å¢ï¼šèœå•æ•°æ®API + é”™è¯¯è¾¹ç•Œ
â”‚     - MenuRegistryService.xml       â”‚
â”‚     - menu-fallback-logic.groovy    â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚         èœå•å…ƒæ•°æ®æ³¨å†Œè¡¨             â”‚  â† æ–°å¢ï¼šç‹¬ç«‹èœå•é…ç½®
â”‚     - menu-registry-schema.xml      â”‚
â”‚     - æƒé™ã€i18nã€åˆ†ç±»ç®¡ç†           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚           é¡µé¢å†…å®¹å±‚                â”‚  â† ç°æœ‰ï¼šScreenå®šä¹‰ä¿æŒä¸å˜
â”‚       (ä¸èœå•å®Œå…¨è§£è€¦)               â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### 2.2 æ•°æ®æµé‡æ„
**è§£è€¦å‰**: èœå•è¯·æ±‚ â†’ Screenè§£æ â†’ subscreenséå† â†’ èœå•æ¸²æŸ“
**è§£è€¦å**: èœå•è¯·æ±‚ â†’ èœå•æœåŠ¡ â†’ å…ƒæ•°æ®æŸ¥è¯¢ â†’ æƒé™è¿‡æ»¤ â†’ èœå•æ¸²æŸ“

---

## ğŸš€ å®æ–½æ–¹æ¡ˆ

### Phase 1: åŸºç¡€è®¾æ–½å»ºè®¾

#### 1.1 èœå•å…ƒæ•°æ®æ³¨å†Œè¡¨ (`menu-registry-schema.xml`)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<menu-registry version="1.0">
    <!-- ä¸»åº”ç”¨èœå•åˆ†ç±» -->
    <menu-category id="main-apps" title="ä¸»åº”ç”¨èœå•" order="1">
        <menu-item id="marketplace" title="æ™ºèƒ½æ¨è"
                   icon="fa fa-chart-line" url="/qapps/marketplace"
                   description="æ™ºèƒ½ä¾›éœ€åŒ¹é…ç³»ç»Ÿ"
                   permissions="MARKETPLACE_VIEW" order="1"/>
        <menu-item id="tools" title="ç³»ç»Ÿå·¥å…·"
                   icon="fa fa-wrench" url="/qapps/tools"
                   description="ç³»ç»Ÿç®¡ç†å·¥å…·é›†"
                   permissions="TOOLS_ACCESS" order="2"/>
        <menu-item id="minio" title="å¯¹è±¡å­˜å‚¨"
                   icon="fa fa-database" url="/qapps/minio"
                   description="MinIOå¯¹è±¡å­˜å‚¨ç®¡ç†"
                   permissions="MINIO_ACCESS" order="3"/>
    </menu-category>

    <!-- é”™è¯¯è¾¹ç•Œå®šä¹‰ -->
    <error-boundaries>
        <fallback-menu category="main-apps">
            <menu-item id="home-fallback" title="è¿”å›é¦–é¡µ"
                      url="/qapps/AppList" icon="fa fa-home"/>
        </fallback-menu>
    </error-boundaries>

    <!-- å›½é™…åŒ–æ”¯æŒ -->
    <i18n>
        <locale code="zh_CN" default="true"/>
        <locale code="en_US">
            <translation key="æ™ºèƒ½æ¨è" value="Smart Recommendations"/>
            <translation key="ç³»ç»Ÿå·¥å…·" value="System Tools"/>
            <translation key="å¯¹è±¡å­˜å‚¨" value="Object Storage"/>
        </locale>
    </i18n>

    <!-- æƒé™ç­–ç•¥ -->
    <permissions>
        <permission id="MARKETPLACE_VIEW" description="è®¿é—®æ™ºèƒ½æ¨èç³»ç»Ÿ"/>
        <permission id="TOOLS_ACCESS" description="ä½¿ç”¨ç³»ç»Ÿç®¡ç†å·¥å…·"/>
        <permission id="MINIO_ACCESS" description="è®¿é—®å¯¹è±¡å­˜å‚¨ç®¡ç†"/>
    </permissions>
</menu-registry>
```

#### 1.2 èœå•æœåŠ¡å±‚ (`MenuRegistryService.xml`)
```xml
<?xml version="1.0" encoding="UTF-8"?>
<services xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance"
         xsi:noNamespaceSchemaLocation="http://moqui.org/xsd/service-definition-3.xsd">

    <!-- èœå•æ³¨å†Œè¡¨åŠ è½½æœåŠ¡ -->
    <service verb="load" noun="MenuRegistry" authenticate="false">
        <description>åŠ è½½å’Œè§£æèœå•é…ç½®ï¼Œæ”¯æŒç¼“å­˜å’Œå›½é™…åŒ–</description>
        <in-parameters>
            <parameter name="forceReload" type="Boolean" default="false"/>
            <parameter name="locale" type="String" default="zh_CN"/>
        </in-parameters>
        <out-parameters>
            <parameter name="success" type="Boolean"/>
            <parameter name="menuRegistry" type="Map"/>
            <parameter name="errorMessage" type="String"/>
        </out-parameters>
        <actions>
            <script><![CDATA[
                try {
                    // æ£€æŸ¥ç¼“å­˜
                    String cacheKey = "menu.registry.${locale}"
                    if (!forceReload) {
                        Map cachedRegistry = ec.cache.get(cacheKey)
                        if (cachedRegistry) {
                            success = true
                            menuRegistry = cachedRegistry
                            return
                        }
                    }

                    // åŠ è½½èœå•æ³¨å†Œè¡¨æ–‡ä»¶
                    String registryPath = "component://webroot/config/menu-registry-schema.xml"
                    Node registryNode = ec.resource.getLocationReference(registryPath)?.getNode()

                    if (!registryNode) {
                        success = false
                        errorMessage = "Menu registry file not found: ${registryPath}"
                        return
                    }

                    // è§£æèœå•é…ç½®
                    Map parsedRegistry = parseMenuRegistry(registryNode, locale)

                    // ç¼“å­˜ç»“æœ
                    ec.cache.put(cacheKey, parsedRegistry)

                    success = true
                    menuRegistry = parsedRegistry

                } catch (Exception e) {
                    success = false
                    errorMessage = "Failed to load menu registry: ${e.message}"
                    ec.logger.error(errorMessage, e)
                }

                // è§£æèœå•æ³¨å†Œè¡¨çš„è¾…åŠ©æ–¹æ³•
                Map parseMenuRegistry(Node registryNode, String locale) {
                    Map registry = [categories: [], permissions: [:]]

                    // è§£æèœå•åˆ†ç±»
                    registryNode."menu-category".each { categoryNode ->
                        Map category = [
                            id: categoryNode."@id",
                            title: getLocalizedText(categoryNode, "title", locale),
                            order: categoryNode."@order" as Integer ?: 999,
                            items: []
                        ]

                        // è§£æèœå•é¡¹
                        categoryNode."menu-item".each { itemNode ->
                            Map item = [
                                id: itemNode."@id",
                                title: getLocalizedText(itemNode, "title", locale),
                                url: itemNode."@url",
                                icon: itemNode."@icon",
                                description: getLocalizedText(itemNode, "description", locale),
                                permissions: itemNode."@permissions",
                                order: itemNode."@order" as Integer ?: 999
                            ]
                            category.items.add(item)
                        }

                        // æŒ‰orderæ’åº
                        category.items.sort { it.order }
                        registry.categories.add(category)
                    }

                    registry.categories.sort { it.order }
                    return registry
                }

                // è·å–æœ¬åœ°åŒ–æ–‡æœ¬çš„è¾…åŠ©æ–¹æ³•
                String getLocalizedText(Node node, String attribute, String locale) {
                    String text = node."@${attribute}"
                    // ç®€åŒ–ç‰ˆæœ¬ï¼Œå®é™…å¯æ‰©å±•æ”¯æŒå®Œæ•´i18n
                    return text
                }
            ]]></script>
        </actions>
    </service>

    <!-- èœå•æ•°æ®æŸ¥è¯¢æœåŠ¡ -->
    <service verb="get" noun="MenuData" authenticate="false">
        <description>æä¾›èœå•æ•°æ®æŸ¥è¯¢APIï¼Œæ›¿ä»£sri.getMenuData()</description>
        <in-parameters>
            <parameter name="categoryId" type="String"/>
            <parameter name="flatten" type="Boolean" default="true"/>
            <parameter name="includePermissions" type="Boolean" default="true"/>
        </in-parameters>
        <out-parameters>
            <parameter name="success" type="Boolean"/>
            <parameter name="menuData" type="List"/>
            <parameter name="metadata" type="Map"/>
        </out-parameters>
        <actions>
            <script><![CDATA[
                try {
                    // åŠ è½½èœå•æ³¨å†Œè¡¨
                    Map loadResult = ec.service.sync().name("load", "MenuRegistry").call()

                    if (!loadResult.success) {
                        success = false
                        menuData = []
                        metadata = [error: loadResult.errorMessage]
                        return
                    }

                    Map registry = loadResult.menuRegistry
                    List resultMenuData = []

                    // è¿‡æ»¤æŒ‡å®šåˆ†ç±»
                    List targetCategories = categoryId ?
                        registry.categories.findAll { it.id == categoryId } :
                        registry.categories

                    // æ„å»ºèœå•æ•°æ®
                    targetCategories.each { category ->
                        category.items.each { item ->
                            // æƒé™æ£€æŸ¥
                            if (includePermissions && item.permissions) {
                                if (!ec.user.hasPermission(item.permissions)) {
                                    return // è·³è¿‡æ— æƒé™é¡¹
                                }
                            }

                            Map menuItem = [
                                title: item.title,
                                url: item.url,
                                image: item.icon,
                                imageType: "icon",
                                description: item.description
                            ]

                            resultMenuData.add(menuItem)
                        }
                    }

                    success = true
                    menuData = resultMenuData
                    metadata = [
                        source: "registry",
                        categoryId: categoryId,
                        itemCount: resultMenuData.size(),
                        timestamp: new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'")
                    ]

                } catch (Exception e) {
                    success = false
                    menuData = []
                    metadata = [
                        source: "error",
                        error: e.message,
                        timestamp: new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'")
                    ]
                    ec.logger.error("Menu data service error: ${e.message}", e)
                }
            ]]></script>
        </actions>
    </service>

    <!-- èœå•å¥åº·æ£€æŸ¥æœåŠ¡ -->
    <service verb="check" noun="MenuHealth" authenticate="false">
        <description>èœå•ç³»ç»Ÿå¥åº·æ£€æŸ¥å’Œç›‘æ§</description>
        <out-parameters>
            <parameter name="healthy" type="Boolean"/>
            <parameter name="issues" type="List"/>
            <parameter name="performance" type="Map"/>
        </out-parameters>
        <actions>
            <script><![CDATA[
                List healthIssues = []
                Map performanceStats = [:]

                try {
                    long startTime = System.currentTimeMillis()

                    // æ£€æŸ¥èœå•æ³¨å†Œè¡¨æœåŠ¡
                    Map loadResult = ec.service.sync().name("load", "MenuRegistry").call()
                    long loadTime = System.currentTimeMillis() - startTime

                    if (!loadResult.success) {
                        healthIssues.add("Menu registry load failed: ${loadResult.errorMessage}")
                    }

                    // æ£€æŸ¥èœå•æ•°æ®æœåŠ¡
                    startTime = System.currentTimeMillis()
                    Map dataResult = ec.service.sync().name("get", "MenuData").call()
                    long dataTime = System.currentTimeMillis() - startTime

                    if (!dataResult.success) {
                        healthIssues.add("Menu data service failed")
                    }

                    // æ€§èƒ½ç»Ÿè®¡
                    performanceStats = [
                        registryLoadTime: "${loadTime}ms",
                        dataQueryTime: "${dataTime}ms",
                        menuItemCount: dataResult.menuData?.size() ?: 0
                    ]

                    healthy = healthIssues.size() == 0
                    issues = healthIssues
                    performance = performanceStats

                } catch (Exception e) {
                    healthy = false
                    issues = ["Health check failed: ${e.message}"]
                    performance = [error: e.message]
                }
            ]]></script>
        </actions>
    </service>

</services>
```

#### 1.3 é”™è¯¯è¾¹ç•Œé€»è¾‘ (`menu-fallback-logic.groovy`)
```groovy
import org.moqui.context.ExecutionContext
import org.slf4j.Logger
import org.slf4j.LoggerFactory

/**
 * èœå•ç³»ç»Ÿé”™è¯¯è¾¹ç•Œå’ŒFallbacké€»è¾‘
 * å®ç°ä¸‰çº§é™çº§ç­–ç•¥ç¡®ä¿èœå•ç³»ç»Ÿ100%å¯ç”¨æ€§
 */
class MenuFallbackLogic {
    private static final Logger logger = LoggerFactory.getLogger(MenuFallbackLogic.class)

    /**
     * å¤„ç†èœå•åŠ è½½å¤±è´¥çš„ä¸‰çº§fallbackç­–ç•¥
     * Level 1: ç¼“å­˜æ¢å¤ â†’ Level 2: ç®€åŒ–æœåŠ¡ â†’ Level 3: ç´§æ€¥èœå•
     */
    static Map handleMenuLoadFailure(ExecutionContext ec, String originalError, String fallbackType) {
        long startTime = System.currentTimeMillis()
        logger.warn("Menu load failure detected: ${originalError}, initiating fallback strategy: ${fallbackType}")

        // Level 1: å°è¯•ä»ç¼“å­˜è·å–æœ€åæ­£å¸¸çš„èœå•
        Map cachedMenu = tryGetCachedMenu(ec)
        if (cachedMenu?.success) {
            logger.info("Successfully recovered menu from cache")
            return enrichFallbackResponse(cachedMenu, "CACHE_RECOVERY", startTime)
        }

        // Level 2: ä½¿ç”¨ç®€åŒ–çš„èœå•æœåŠ¡
        Map simplifiedMenu = trySimplifiedMenuService(ec)
        if (simplifiedMenu?.success) {
            logger.info("Successfully generated simplified menu")
            return enrichFallbackResponse(simplifiedMenu, "SIMPLIFIED_SERVICE", startTime)
        }

        // Level 3: ç´§æ€¥èœå•é¡¹ï¼ˆå§‹ç»ˆå¯ç”¨ï¼‰
        logger.warn("Using emergency menu - all other fallback options failed")
        return getEmergencyMenu(ec, startTime)
    }

    /**
     * å°è¯•ä»ç¼“å­˜æ¢å¤èœå•æ•°æ®
     */
    private static Map tryGetCachedMenu(ExecutionContext ec) {
        try {
            def cacheKey = "menu.registry.last.success"
            Map cachedData = ec.cache.get(cacheKey)

            if (cachedData && cachedData.menuData?.size() > 0) {
                if (validateMenuData(cachedData.menuData)) {
                    return [
                        success: true,
                        menuData: cachedData.menuData,
                        source: "cache"
                    ]
                }
            }
        } catch (Exception e) {
            logger.warn("Cache recovery failed: ${e.message}")
        }
        return [success: false]
    }

    /**
     * å°è¯•ä½¿ç”¨ç®€åŒ–çš„èœå•æœåŠ¡
     */
    private static Map trySimplifiedMenuService(ExecutionContext ec) {
        try {
            List simplifiedMenus = [
                [
                    title: "åº”ç”¨åˆ—è¡¨",
                    url: "/qapps/AppList",
                    image: "fa fa-th",
                    imageType: "icon",
                    description: "åº”ç”¨ç¨‹åºåˆ—è¡¨"
                ],
                [
                    title: "æ™ºèƒ½æ¨è",
                    url: "/qapps/marketplace/Dashboard",
                    image: "fa fa-chart-line",
                    imageType: "icon",
                    description: "æ™ºèƒ½ä¾›éœ€åŒ¹é…"
                ]
            ]

            return [
                success: true,
                menuData: simplifiedMenus,
                source: "simplified"
            ]
        } catch (Exception e) {
            logger.warn("Simplified menu service failed: ${e.message}")
        }
        return [success: false]
    }

    /**
     * ç”Ÿæˆç´§æ€¥èœå•ï¼ˆæœ€åä¿éšœï¼‰
     */
    private static Map getEmergencyMenu(ExecutionContext ec, long startTime) {
        List emergencyMenu = [
            [
                title: "ç³»ç»Ÿé¦–é¡µ",
                url: "/qapps/AppList",
                image: "fa fa-home",
                imageType: "icon",
                description: "è¿”å›ç³»ç»Ÿé¦–é¡µ"
            ]
        ]

        return [
            success: true,
            menuData: emergencyMenu,
            source: "emergency",
            fallbackTime: System.currentTimeMillis() - startTime,
            timestamp: new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'")
        ]
    }

    /**
     * éªŒè¯èœå•æ•°æ®å®Œæ•´æ€§
     */
    private static boolean validateMenuData(List menuData) {
        if (!menuData || menuData.size() == 0) return false
        return menuData.every { item -> item.title && item.url }
    }

    /**
     * ä¸°å¯Œfallbackå“åº”æ•°æ®
     */
    private static Map enrichFallbackResponse(Map baseResponse, String fallbackSource, long startTime) {
        baseResponse.put("fallbackSource", fallbackSource)
        baseResponse.put("fallbackTime", System.currentTimeMillis() - startTime)
        baseResponse.put("timestamp", new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'"))
        return baseResponse
    }
}
```

### Phase 2: æ ¸å¿ƒé›†æˆ

#### 2.1 qapps.xml menuDataå¢å¼º
**é›†æˆèœå•æ³¨å†Œè¡¨æœåŠ¡**:
```xml
<transition name="menuData" read-only="true" begin-transaction="false">
    <actions><script><![CDATA[
        // Enhanced menuData transition - Phase 2 Integration
        List menuDataList = []
        boolean useFallback = false

        try {
            // Step 1: ä¼˜å…ˆå°è¯•Menu Registry Service
            Map registryResult = null
            try {
                registryResult = ec.service.sync().name("get", "MenuData")
                    .parameters([
                        categoryId: "main-apps",
                        flatten: true,
                        includePermissions: true
                    ]).call()
            } catch (Exception serviceEx) {
                ec.logger.warn("Menu Registry Service unavailable: ${serviceEx.message}")
            }

            // Step 2: å¤„ç†Registry Serviceç»“æœ
            if (registryResult?.success && registryResult.menuData?.size() > 0) {
                menuDataList.addAll(registryResult.menuData)
                ec.logger.info("Menu loaded from Registry Service (${menuDataList.size()} items)")
            } else {
                // Step 3: Fallbackåˆ°ä¼ ç»Ÿsri.getMenuData()
                useFallback = true
                ec.logger.info("Using traditional sri.getMenuData() as fallback")

                List fallbackMenus = sri.getMenuData(sri.screenUrlInfo.extraPathNameList)
                if (fallbackMenus) {
                    menuDataList.addAll(fallbackMenus)
                } else {
                    // Step 4: Emergency fallback using Groovy logic
                    Map emergencyResult = MenuFallbackLogic.handleMenuLoadFailure(
                        ec, "sri.getMenuData returned null", "EMERGENCY_FALLBACK"
                    )
                    if (emergencyResult.success) {
                        menuDataList.addAll(emergencyResult.menuData)
                    }
                }
            }

            // Step 5: æ·»åŠ å…ƒæ•°æ®ç”¨äºç›‘æ§å’Œè°ƒè¯•
            def responseData = [
                menuData: menuDataList,
                metadata: [
                    source: useFallback ? "sri-fallback" : "registry",
                    itemCount: menuDataList.size(),
                    timestamp: new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'"),
                    version: "2.0-enhanced"
                ]
            ]

            ec.web.sendJsonResponse(responseData)

        } catch (Exception e) {
            // Critical error fallback
            ec.logger.error("Critical error in menuData transition: ${e.message}", e)

            Map emergencyResult = MenuFallbackLogic.handleMenuLoadFailure(
                ec, e.message, "CRITICAL_ERROR"
            )

            def errorResponse = [
                menuData: emergencyResult.menuData,
                metadata: [
                    source: emergencyResult.source,
                    itemCount: emergencyResult.menuData?.size() ?: 0,
                    error: e.message,
                    timestamp: new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'")
                ]
            ]

            ec.web.sendJsonResponse(errorResponse)
        }
    ]]></script></actions>
    <default-response type="none" save-parameters="true"/>
</transition>
```

#### 2.2 ç»„ä»¶è§£è€¦é…ç½®ç¤ºä¾‹ (marketplace)
**marketplaceç»„ä»¶ç‹¬ç«‹èœå•é…ç½®**:
```xml
<transition name="menuData" read-only="true" begin-transaction="false">
    <actions><script><![CDATA[
        // Marketplace component decoupled menu implementation
        List menuDataList = []
        boolean useFallback = false

        try {
            // å°è¯•è·å–ç»„ä»¶ä¸“ç”¨èœå•é…ç½®
            Map registryResult = null
            try {
                registryResult = ec.service.sync().name("get", "MenuData")
                    .parameters([
                        categoryId: "marketplace-submenu",
                        flatten: true,
                        includePermissions: true
                    ]).call()
            } catch (Exception serviceEx) {
                ec.logger.warn("Marketplace Menu Registry Service failed: ${serviceEx.message}")
            }

            if (registryResult?.success && registryResult.menuData?.size() > 0) {
                menuDataList.addAll(registryResult.menuData)
                ec.logger.info("Marketplace menu loaded from Registry Service")
            } else {
                // ç»„ä»¶çº§åˆ«fallback - ä¸ä¾èµ–Screenç»“æ„
                useFallback = true

                def componentMenus = [
                    [
                        title: "æ§åˆ¶å°",
                        url: "/qapps/marketplace/Dashboard",
                        image: "fa fa-tachometer-alt",
                        imageType: "icon",
                        description: "æ™ºèƒ½æ¨èæ€»è§ˆå’Œç»Ÿè®¡",
                        priority: 1
                    ]
                ]

                // åŸºäºæƒé™åŠ¨æ€æ·»åŠ ç®¡ç†åŠŸèƒ½
                if (ec.user.hasPermission("ADMIN") || ec.web.parameters.debug == "true") {
                    componentMenus.addAll([
                        [
                            title: "ç”µå•†æ§åˆ¶å°",
                            url: "/qapps/marketplace/Ecommerce",
                            image: "fa fa-shopping-cart",
                            imageType: "icon",
                            priority: 2
                        ],
                        [
                            title: "ç³»ç»Ÿé…ç½®",
                            url: "/qapps/marketplace/SystemConfig",
                            image: "fa fa-cog",
                            imageType: "icon",
                            priority: 3
                        ]
                    ])
                }

                menuDataList.addAll(componentMenus)
            }

            // æ·»åŠ ç»„ä»¶å…ƒæ•°æ®
            def responseData = [
                menuData: menuDataList,
                metadata: [
                    component: "moqui-marketplace",
                    source: useFallback ? "component-fallback" : "registry",
                    itemCount: menuDataList.size(),
                    timestamp: new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'"),
                    version: "2.0-decoupled"
                ]
            ]

            ec.web.sendJsonResponse(responseData)

        } catch (Exception e) {
            // ç»„ä»¶ç´§æ€¥fallback
            ec.logger.error("Critical error in marketplace menuData: ${e.message}", e)

            def emergencyMenu = [
                menuData: [[
                    title: "æ§åˆ¶å°",
                    url: "/qapps/marketplace/Dashboard",
                    image: "fa fa-tachometer-alt",
                    imageType: "icon",
                    description: "ç´§æ€¥æ¨¡å¼ï¼šä»…æ§åˆ¶å°å¯ç”¨"
                ]],
                metadata: [
                    component: "moqui-marketplace",
                    source: "emergency",
                    itemCount: 1,
                    timestamp: new Date().format("yyyy-MM-dd'T'HH:mm:ss'Z'"),
                    version: "2.0-emergency",
                    error: e.message
                ]
            ]

            ec.web.sendJsonResponse(emergencyMenu)
        }
    ]]></script></actions>
    <default-response type="none" save-parameters="true"/>
</transition>
```

### Phase 3: æµ‹è¯•éªŒè¯

#### 3.1 åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•è„šæœ¬
**è‡ªåŠ¨åŒ–7é¡¹æ ¸å¿ƒæµ‹è¯•** (`test-menu-decoupling.sh`):

```bash
#!/bin/bash

# èœå•è§£è€¦æ¶æ„åŠŸèƒ½æµ‹è¯•è„šæœ¬
set -e

BASE_URL="http://localhost:8080"
TEST_SESSION_FILE="/tmp/menu_test_session.txt"
RESULTS_DIR="/tmp/menu_test_results"
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")

# é¢œè‰²è¾“å‡ºå‡½æ•°
print_success() { echo -e "\\033[32mâœ… $1\\033[0m"; }
print_error() { echo -e "\\033[31mâŒ $1\\033[0m"; }
print_info() { echo -e "\\033[34mâ„¹ï¸  $1\\033[0m"; }

# æµ‹è¯•ç»“æœç»Ÿè®¡
TESTS_TOTAL=0; TESTS_PASSED=0; TESTS_FAILED=0

mkdir -p "${RESULTS_DIR}"

# è¿è¡Œæµ‹è¯•å¹¶è®°å½•ç»“æœ
run_test() {
    local test_name="$1"; local test_command="$2"
    TESTS_TOTAL=$((TESTS_TOTAL + 1))
    print_info "æµ‹è¯• ${TESTS_TOTAL}: ${test_name}"

    if eval "$test_command"; then
        print_success "é€šè¿‡: ${test_name}"
        TESTS_PASSED=$((TESTS_PASSED + 1))
    else
        print_error "å¤±è´¥: ${test_name}"
        TESTS_FAILED=$((TESTS_FAILED + 1))
    fi
}

# åˆå§‹åŒ–æµ‹è¯•ä¼šè¯
init_test_session() {
    rm -f "${TEST_SESSION_FILE}"
    curl -s -X POST "${BASE_URL}/Login/login" \
         -d "username=john.doe&password=moqui" \
         -c "${TEST_SESSION_FILE}" -L > /dev/null

    local session_valid=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps" -w "%{http_code}" -o /dev/null)
    if [ "$session_valid" = "200" ]; then
        print_success "æµ‹è¯•ä¼šè¯åˆå§‹åŒ–æˆåŠŸ"
        return 0
    else
        print_error "æµ‹è¯•ä¼šè¯åˆå§‹åŒ–å¤±è´¥ (HTTP ${session_valid})"
        return 1
    fi
}

# Test 1: èœå•æ³¨å†Œè¡¨æœåŠ¡å¯ç”¨æ€§æµ‹è¯•
test_menu_registry_service() {
    local response=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/rest/s1/moqui/load/MenuRegistry")
    if echo "$response" | grep -q '"success"' && echo "$response" | grep -q '"menuRegistry"'; then
        print_success "èœå•æ³¨å†Œè¡¨æœåŠ¡å“åº”æ­£å¸¸"
        return 0
    else
        print_error "èœå•æ³¨å†Œè¡¨æœåŠ¡å“åº”å¼‚å¸¸"
        return 1
    fi
}

# Test 2: èœå•æ•°æ®APIç‹¬ç«‹æ€§æµ‹è¯•
test_menu_data_independence() {
    local response=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps/menuData")
    if echo "$response" | grep -q '"metadata"' && echo "$response" | grep -q '"source"'; then
        local source=$(echo "$response" | grep -o '"source":"[^"]*"' | cut -d'"' -f4)
        print_success "èœå•æ•°æ®APIæ­£å¸¸ï¼Œæ•°æ®æº: ${source}"
        return 0
    else
        print_error "èœå•æ•°æ®APIå“åº”æ ¼å¼å¼‚å¸¸"
        return 1
    fi
}

# Test 3: èœå•å¥åº·æ£€æŸ¥æµ‹è¯•
test_menu_health_check() {
    local response=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/rest/s1/moqui/check/MenuHealth")
    if echo "$response" | grep -q '"healthy"' && echo "$response" | grep -q '"performance"'; then
        print_success "èœå•å¥åº·æ£€æŸ¥æ­£å¸¸"
        return 0
    else
        print_error "èœå•å¥åº·æ£€æŸ¥å¤±è´¥"
        return 1
    fi
}

# Test 4: ç»„ä»¶èœå•é›†æˆæµ‹è¯•
test_component_menu_integration() {
    local components=("marketplace" "tools" "minio")
    for component in "${components[@]}"; do
        local response=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps/${component}/menuData")
        if echo "$response" | grep -q '"title"' && echo "$response" | grep -q '"url"'; then
            print_success "ç»„ä»¶ ${component} èœå•é›†æˆæ­£å¸¸"
        else
            print_info "ç»„ä»¶ ${component} èœå•é›†æˆå¼‚å¸¸ï¼ˆå¯èƒ½ä¸ºæ­£å¸¸ï¼Œç»„ä»¶æœªå®‰è£…ï¼‰"
        fi
    done
    return 0
}

# Test 5: é”™è¯¯éš”ç¦»æµ‹è¯•
test_error_isolation() {
    # è®¿é—®ä¸å­˜åœ¨é¡µé¢ï¼ŒéªŒè¯èœå•ä»å¯ç”¨
    curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps/nonexistent_page" > /dev/null
    local menu_response=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps/menuData")

    if echo "$menu_response" | grep -q '"title"'; then
        print_success "é”™è¯¯éš”ç¦»æµ‹è¯•é€šè¿‡ï¼šé¡µé¢é”™è¯¯æœªå½±å“èœå•"
        return 0
    else
        print_error "é”™è¯¯éš”ç¦»æµ‹è¯•å¤±è´¥ï¼šé¡µé¢é”™è¯¯å½±å“äº†èœå•"
        return 1
    fi
}

# Test 6: æ€§èƒ½åŸºå‡†æµ‹è¯•
test_performance_benchmark() {
    local total_time=0; local test_rounds=5

    for i in $(seq 1 $test_rounds); do
        local start_time=$(date +%s%3N)
        curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps/menuData" > /dev/null
        local end_time=$(date +%s%3N)
        local duration=$((end_time - start_time))
        total_time=$((total_time + duration))
    done

    local avg_time=$((total_time / test_rounds))

    if [ "$avg_time" -lt 500 ]; then
        print_success "æ€§èƒ½æµ‹è¯•é€šè¿‡ï¼šå¹³å‡å“åº”æ—¶é—´ ${avg_time}ms < 500ms"
        return 0
    else
        print_info "æ€§èƒ½æµ‹è¯•è­¦å‘Šï¼šå¹³å‡å“åº”æ—¶é—´ ${avg_time}ms > 500ms"
        return 1
    fi
}

# Test 7: å…¼å®¹æ€§æµ‹è¯•
test_compatibility() {
    local traditional_response=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/apps" -w "%{http_code}")

    if [[ "$traditional_response" == *"200"* ]] || [[ "$traditional_response" == *"302"* ]]; then
        print_success "ä¼ ç»Ÿè·¯å¾„å…¼å®¹æ€§æ­£å¸¸"
        return 0
    else
        print_error "ä¼ ç»Ÿè·¯å¾„å…¼å®¹æ€§å¤±è´¥"
        return 1
    fi
}

# ä¸»æµ‹è¯•æµç¨‹
main() {
    echo "å¼€å§‹èœå•è§£è€¦æ¶æ„åŠŸèƒ½æµ‹è¯•..."
    echo "æµ‹è¯•æ—¶é—´: $(date)"
    echo ""

    if ! init_test_session; then
        print_error "æ— æ³•åˆå§‹åŒ–æµ‹è¯•ä¼šè¯ï¼Œç»ˆæ­¢æµ‹è¯•"
        exit 1
    fi

    # æ‰§è¡Œæ‰€æœ‰æµ‹è¯•
    run_test "èœå•æ³¨å†Œè¡¨æœåŠ¡å¯ç”¨æ€§" "test_menu_registry_service"
    run_test "èœå•æ•°æ®APIç‹¬ç«‹æ€§" "test_menu_data_independence"
    run_test "èœå•å¥åº·æ£€æŸ¥" "test_menu_health_check"
    run_test "ç»„ä»¶èœå•é›†æˆ" "test_component_menu_integration"
    run_test "é”™è¯¯éš”ç¦»èƒ½åŠ›" "test_error_isolation"
    run_test "æ€§èƒ½åŸºå‡†æµ‹è¯•" "test_performance_benchmark"
    run_test "å…¼å®¹æ€§æµ‹è¯•" "test_compatibility"

    # æµ‹è¯•ç»“æœæ±‡æ€»
    echo "=========================================="
    echo "æµ‹è¯•ç»“æœæ±‡æ€»"
    echo "=========================================="
    echo "æ€»æµ‹è¯•æ•°: ${TESTS_TOTAL}"
    echo "é€šè¿‡: ${TESTS_PASSED}"
    echo "å¤±è´¥: ${TESTS_FAILED}"
    echo "æˆåŠŸç‡: $(( (TESTS_PASSED * 100) / TESTS_TOTAL ))%"

    if [ "$TESTS_FAILED" -gt 0 ]; then
        print_error "æµ‹è¯•å®Œæˆï¼Œå­˜åœ¨ ${TESTS_FAILED} ä¸ªå¤±è´¥é¡¹"
        return 1
    else
        print_success "æ‰€æœ‰æµ‹è¯•é€šè¿‡ï¼èœå•è§£è€¦æ¶æ„éªŒè¯æˆåŠŸ"
        return 0
    fi
}

# æ¸…ç†å‡½æ•°
cleanup() {
    rm -f "${TEST_SESSION_FILE}"
}

trap cleanup EXIT
main "$@"
```

#### 3.2 æ•…éšœæ¨¡æ‹Ÿæµ‹è¯•è„šæœ¬
**6ç§é”™è¯¯éš”ç¦»åœºæ™¯éªŒè¯** (`simulate-page-errors.sh`):

```bash
#!/bin/bash

# èœå•é”™è¯¯éš”ç¦»éªŒè¯è„šæœ¬
set -e

BASE_URL="http://localhost:8080"
TEST_SESSION_FILE="/tmp/error_simulation_session.txt"
SIMULATION_RESULTS="/tmp/error_simulation_results"
TIMESTAMP=$(date +"%Y%m%d_%H%M%S")

mkdir -p "${SIMULATION_RESULTS}"

print_success() { echo -e "\\033[32mâœ… $1\\033[0m"; }
print_warning() { echo -e "\\033[33mâš ï¸  $1\\033[0m"; }
print_error() { echo -e "\\033[31mâŒ $1\\033[0m"; }
print_info() { echo -e "\\033[34mâ„¹ï¸  $1\\033[0m"; }

# åˆå§‹åŒ–æµ‹è¯•ä¼šè¯
init_session() {
    rm -f "${TEST_SESSION_FILE}"
    curl -s -X POST "${BASE_URL}/Login/login" \
         -d "username=john.doe&password=moqui" \
         -c "${TEST_SESSION_FILE}" -L > /dev/null

    if curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps" -w "%{http_code}" -o /dev/null | grep -q "200"; then
        print_success "ä¼šè¯åˆå§‹åŒ–æˆåŠŸ"
        return 0
    else
        print_error "ä¼šè¯åˆå§‹åŒ–å¤±è´¥"
        return 1
    fi
}

# éªŒè¯èœå•å®Œæ•´æ€§
verify_menu_integrity() {
    local test_name="$1"
    local menu_response=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps/menuData")

    if echo "$menu_response" | grep -q '"title"' && echo "$menu_response" | grep -q '"url"'; then
        local item_count=$(echo "$menu_response" | grep -o '"title"' | wc -l)
        print_success "${test_name}: èœå•å®Œæ•´æ€§éªŒè¯é€šè¿‡ (${item_count}ä¸ªèœå•é¡¹)"
        echo "$menu_response" > "${SIMULATION_RESULTS}/${test_name}_menu_${TIMESTAMP}.json"
        return 0
    else
        print_error "${test_name}: èœå•å®Œæ•´æ€§éªŒè¯å¤±è´¥"
        echo "$menu_response" > "${SIMULATION_RESULTS}/${test_name}_menu_error_${TIMESTAMP}.json"
        return 1
    fi
}

# Simulation 1: æ¨¡æ‹ŸXMLè§£æé”™è¯¯
simulate_xml_parsing_error() {
    print_info "æ¨¡æ‹Ÿ1: XMLè§£æé”™è¯¯..."

    local error_paths=(
        "/qapps/nonexistent_component"
        "/qapps/marketplace/InvalidPage"
        "/qapps/tools/NonExistentTool"
        "/qapps/InvalidXmlPath"
    )

    local error_count=0
    for path in "${error_paths[@]}"; do
        local response_code=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}${path}" -w "%{http_code}" -o /dev/null)
        if [[ "$response_code" == "404" ]] || [[ "$response_code" == "500" ]]; then
            error_count=$((error_count + 1))
        fi
    done

    print_info "æ¨¡æ‹Ÿäº† ${error_count} ä¸ªXMLè§£æé”™è¯¯"
    verify_menu_integrity "xml_parsing_error_simulation"
}

# Simulation 2: æ¨¡æ‹Ÿç»„ä»¶ä¸å¯ç”¨
simulate_component_unavailable() {
    print_info "æ¨¡æ‹Ÿ2: ç»„ä»¶ä¸å¯ç”¨..."

    local unavailable_components=(
        "/qapps/missing_component/menu"
        "/qapps/broken_component/Dashboard"
        "/qapps/disabled_component/main"
    )

    for component in "${unavailable_components[@]}"; do
        curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}${component}" > /dev/null 2>&1
    done

    verify_menu_integrity "component_unavailable_simulation"
}

# Simulation 3: æ¨¡æ‹ŸæœåŠ¡è¶…æ—¶
simulate_service_timeout() {
    print_info "æ¨¡æ‹Ÿ3: æœåŠ¡è¶…æ—¶..."

    local concurrent_requests=10
    local pids=()

    for i in $(seq 1 $concurrent_requests); do
        (curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps/menuData" \
            --connect-timeout 1 --max-time 5 > /dev/null 2>&1) &
        pids+=($!)
    done

    for pid in "${pids[@]}"; do
        wait "$pid" 2>/dev/null || true
    done

    print_info "å¹¶å‘è¯·æ±‚å®Œæˆ"
    verify_menu_integrity "service_timeout_simulation"
}

# Simulation 4: æ¨¡æ‹Ÿæƒé™é”™è¯¯
simulate_permission_error() {
    print_info "æ¨¡æ‹Ÿ4: æƒé™é”™è¯¯..."

    local restricted_paths=(
        "/qapps/system/admin"
        "/qapps/tools/restricted"
        "/qapps/marketplace/admin_config"
    )

    for path in "${restricted_paths[@]}"; do
        local response_code=$(curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}${path}" -w "%{http_code}" -o /dev/null)
        print_info "  è®¿é—®å—é™è·¯å¾„: ${path} å“åº”ç : ${response_code}"
    done

    verify_menu_integrity "permission_error_simulation"
}

# Simulation 5: æ¨¡æ‹Ÿç½‘ç»œä¸­æ–­æ¢å¤
simulate_network_interruption() {
    print_info "æ¨¡æ‹Ÿ5: ç½‘ç»œä¸­æ–­æ¢å¤..."

    local attempts=5
    for i in $(seq 1 $attempts); do
        if curl -s -b "${TEST_SESSION_FILE}" "${BASE_URL}/qapps/menuData" --connect-timeout 2 > /dev/null; then
            print_info "  å°è¯• ${i}/${attempts}: è¿æ¥æˆåŠŸ"
        else
            print_info "  å°è¯• ${i}/${attempts}: è¿æ¥å¤±è´¥ï¼ˆæ¨¡æ‹Ÿç½‘ç»œé—®é¢˜ï¼‰"
        fi
        sleep 1
    done

    verify_menu_integrity "network_interruption_simulation"
}

# Simulation 6: éªŒè¯Fallbackæœºåˆ¶
verify_fallback_mechanism() {
    print_info "éªŒè¯6: Fallbackæœºåˆ¶æµ‹è¯•..."

    local fallback_response=$(curl -s -b "${TEST_SESSION_FILE}" \
        "${BASE_URL}/qapps/menuData?forceFailback=true")

    if echo "$fallback_response" | grep -q '"source"'; then
        local source=$(echo "$fallback_response" | grep -o '"source":"[^"]*"' | cut -d'"' -f4)
        print_success "Fallbackæœºåˆ¶éªŒè¯æˆåŠŸï¼Œæ•°æ®æº: ${source}"
        echo "$fallback_response" > "${SIMULATION_RESULTS}/fallback_response_${TIMESTAMP}.json"
        return 0
    else
        print_warning "Fallbackæœºåˆ¶æœªæ˜ç¡®æ ‡è¯†ï¼ˆå¯èƒ½æ­£å¸¸ï¼‰"
        echo "$fallback_response" > "${SIMULATION_RESULTS}/fallback_unclear_${TIMESTAMP}.json"
        return 0
    fi
}

# ç”Ÿæˆé”™è¯¯æ¨¡æ‹ŸæŠ¥å‘Š
generate_simulation_report() {
    local success_tests=$(find "${SIMULATION_RESULTS}" -name "*menu_${TIMESTAMP}.json" | wc -l)
    local error_tests=$(find "${SIMULATION_RESULTS}" -name "*menu_error_${TIMESTAMP}.json" | wc -l)

    cat > "${SIMULATION_RESULTS}/error_simulation_report_${TIMESTAMP}.md" << EOF
# èœå•é”™è¯¯éš”ç¦»éªŒè¯æŠ¥å‘Š

**æµ‹è¯•æ—¶é—´**: $(date)
**æ¨¡æ‹Ÿç‰ˆæœ¬**: Phase 3 Error Simulation

## é”™è¯¯æ¨¡æ‹Ÿç»“æœ

- **æˆåŠŸéš”ç¦»**: ${success_tests} ç§é”™è¯¯åœºæ™¯
- **éš”ç¦»å¤±è´¥**: ${error_tests} ç§é”™è¯¯åœºæ™¯
- **éš”ç¦»ç‡**: $(( (success_tests * 100) / (success_tests + error_tests) ))%

## æ¨¡æ‹Ÿåœºæ™¯

1. **XMLè§£æé”™è¯¯æ¨¡æ‹Ÿ**: éªŒè¯é¡µé¢XMLé”™è¯¯ä¸å½±å“èœå•
2. **ç»„ä»¶ä¸å¯ç”¨æ¨¡æ‹Ÿ**: éªŒè¯ç»„ä»¶æ•…éšœéš”ç¦»
3. **æœåŠ¡è¶…æ—¶æ¨¡æ‹Ÿ**: éªŒè¯é«˜è´Ÿè½½ä¸‹èœå•ç¨³å®šæ€§
4. **æƒé™é”™è¯¯æ¨¡æ‹Ÿ**: éªŒè¯æƒé™é—®é¢˜ä¸å½±å“åŸºç¡€å¯¼èˆª
5. **ç½‘ç»œä¸­æ–­æ¨¡æ‹Ÿ**: éªŒè¯ç½‘ç»œé—®é¢˜æ¢å¤èƒ½åŠ›
6. **Fallbackæœºåˆ¶éªŒè¯**: éªŒè¯é™çº§ç­–ç•¥æœ‰æ•ˆæ€§

## å…³é”®å‘ç°
EOF

    if [ "$error_tests" -eq 0 ]; then
        echo "âœ… æ‰€æœ‰é”™è¯¯åœºæ™¯éƒ½è¢«æˆåŠŸéš”ç¦»ï¼Œèœå•ç³»ç»Ÿè¡¨ç°å‡ºè‰¯å¥½çš„å®¹é”™èƒ½åŠ›" >> "${SIMULATION_RESULTS}/error_simulation_report_${TIMESTAMP}.md"
        print_success "é”™è¯¯éš”ç¦»éªŒè¯å®Œå…¨æˆåŠŸï¼"
    else
        echo "âš ï¸ å‘ç° ${error_tests} ä¸ªåœºæ™¯ä¸­èœå•å—åˆ°å½±å“ï¼Œéœ€è¦è¿›ä¸€æ­¥ä¼˜åŒ–é”™è¯¯è¾¹ç•Œ" >> "${SIMULATION_RESULTS}/error_simulation_report_${TIMESTAMP}.md"
        print_warning "å‘ç°éƒ¨åˆ†é”™è¯¯éš”ç¦»é—®é¢˜ï¼Œè¯¦è§æŠ¥å‘Š"
    fi

    echo "è¯¦ç»†æŠ¥å‘Š: ${SIMULATION_RESULTS}/error_simulation_report_${TIMESTAMP}.md"
}

# ä¸»æµç¨‹
main() {
    echo "å¼€å§‹èœå•é”™è¯¯éš”ç¦»éªŒè¯..."
    echo "æµ‹è¯•æ—¶é—´: $(date)"
    echo "ç»“æœç›®å½•: ${SIMULATION_RESULTS}"
    echo ""

    if ! init_session; then
        print_error "æ— æ³•åˆå§‹åŒ–ä¼šè¯ï¼Œç»ˆæ­¢æµ‹è¯•"
        exit 1
    fi

    # è®°å½•åŸºçº¿
    verify_menu_integrity "baseline"

    # æ‰§è¡Œæ‰€æœ‰é”™è¯¯æ¨¡æ‹Ÿ
    simulate_xml_parsing_error
    sleep 2
    simulate_component_unavailable
    sleep 2
    simulate_service_timeout
    sleep 2
    simulate_permission_error
    sleep 2
    simulate_network_interruption
    sleep 2
    verify_fallback_mechanism

    # æœ€ç»ˆéªŒè¯
    verify_menu_integrity "final_verification"

    # ç”ŸæˆæŠ¥å‘Š
    generate_simulation_report

    print_success "é”™è¯¯æ¨¡æ‹Ÿæµ‹è¯•å®Œæˆï¼"
}

# æ¸…ç†
cleanup() {
    rm -f "${TEST_SESSION_FILE}"
}

trap cleanup EXIT
main "$@"
```

---

## ğŸ”§ éƒ¨ç½²å®æ–½

### å¿«é€Ÿéƒ¨ç½²æŒ‡å—

#### æ­¥éª¤1: ç¯å¢ƒå‡†å¤‡
```bash
# 1. åˆ›å»ºéƒ¨ç½²ç›®å½•
mkdir -p runtime/component/webroot/config/
mkdir -p runtime/base-component/tools/service/
mkdir -p runtime/base-component/webroot/script/

# 2. å¤‡ä»½å…³é”®é…ç½®æ–‡ä»¶
cp runtime/base-component/webroot/screen/webroot/qapps.xml qapps.xml.backup
```

#### æ­¥éª¤2: åŸºç¡€è®¾æ–½éƒ¨ç½²
```bash
# 1. éƒ¨ç½²èœå•æ³¨å†Œè¡¨Schema
cp /tmp/menu-registry-schema.xml runtime/component/webroot/config/

# 2. éƒ¨ç½²èœå•æœåŠ¡å®šä¹‰
cp /tmp/MenuRegistryService.xml runtime/base-component/tools/service/

# 3. éƒ¨ç½²é”™è¯¯è¾¹ç•Œé€»è¾‘
cp /tmp/menu-fallback-logic.groovy runtime/base-component/webroot/script/
```

#### æ­¥éª¤3: æ ¸å¿ƒé…ç½®æ›´æ–°
å°† `/tmp/qapps-enhanced-menudata.xml` ä¸­çš„menuData transitionå†…å®¹åˆå¹¶åˆ° `qapps.xml`

#### æ­¥éª¤4: éªŒè¯éƒ¨ç½²
```bash
# é‡å¯ç³»ç»Ÿ
./gradlew clean && ./gradlew run

# æ‰§è¡ŒéªŒè¯æµ‹è¯•
bash /tmp/test-menu-decoupling.sh
bash /tmp/simulate-page-errors.sh
```

### å®‰å…¨å›æ»šæ–¹æ¡ˆ

```bash
#!/bin/bash
# ä¸€é”®å›æ»šè„šæœ¬
echo "å¼€å§‹å›æ»šåˆ°åŸå§‹é…ç½®..."

# 1. æ¢å¤åŸå§‹é…ç½®æ–‡ä»¶
cp qapps.xml.backup runtime/base-component/webroot/screen/webroot/qapps.xml

# 2. ç§»é™¤æ–°å¢æ–‡ä»¶
rm -f runtime/component/webroot/config/menu-registry-schema.xml
rm -f runtime/base-component/tools/service/MenuRegistryService.xml
rm -f runtime/base-component/webroot/script/menu-fallback-logic.groovy

# 3. é‡å¯ç³»ç»Ÿ
./gradlew clean && ./gradlew run

echo "âœ… å›æ»šå®Œæˆï¼Œç³»ç»Ÿå·²æ¢å¤åˆ°åŸå§‹çŠ¶æ€"
```

---

## ğŸ“Š æˆåŠŸæŒ‡æ ‡ä¸ç›‘æ§

### å…³é”®æ€§èƒ½æŒ‡æ ‡ (KPI)

| æŒ‡æ ‡ç±»å‹ | ç›®æ ‡å€¼ | éªŒè¯æ–¹æ³• |
|----------|--------|----------|
| **é”™è¯¯éš”ç¦»ç‡** | 100% | æ•…éšœæ¨¡æ‹Ÿæµ‹è¯• |
| **èœå•å“åº”æ—¶é—´** | <200ms | æ€§èƒ½åŸºå‡†æµ‹è¯• |
| **ç³»ç»Ÿå¯ç”¨æ€§** | 99.9% | å¥åº·æ£€æŸ¥API |
| **å‘åå…¼å®¹æ€§** | 100% | å…¼å®¹æ€§æµ‹è¯• |

### ç›‘æ§ç­–ç•¥

#### 1. å®æ—¶å¥åº·ç›‘æ§
```bash
# èœå•ç³»ç»Ÿå¥åº·æ£€æŸ¥
curl -s "http://localhost:8080/rest/s1/moqui/check/MenuHealth" | jq '.'

# é¢„æœŸå“åº”
{
  "healthy": true,
  "issues": [],
  "performance": {
    "registryLoadTime": "45ms",
    "dataQueryTime": "23ms",
    "menuItemCount": 4
  }
}
```

#### 2. æ€§èƒ½åŸºå‡†ç›‘æ§
```bash
# èœå•åŠ è½½æ€§èƒ½æµ‹è¯•
for i in {1..10}; do
  time curl -s "http://localhost:8080/qapps/menuData" > /dev/null
done
```

#### 3. é”™è¯¯æ—¥å¿—ç›‘æ§
```bash
# ç›‘æ§èœå•ç›¸å…³é”™è¯¯
tail -f runtime/log/moqui.log | grep -E "(MenuRegistry|menuData|fallback)"
```

---

## ğŸš€ æ€»ç»“ä¸å»ºè®®

### âœ… è§£å†³æ–¹æ¡ˆçŠ¶æ€

**ğŸ¯ å®Œå…¨å°±ç»ª** - æœ¬è§£å†³æ–¹æ¡ˆå·²å®Œæˆï¼š
- âœ… **é—®é¢˜è°ƒç ”åˆ†æ** - æ·±å…¥è¯†åˆ«è€¦åˆç‚¹å’Œå½±å“
- âœ… **æ¶æ„è®¾è®¡** - ä¸‰å±‚åˆ†ç¦»çš„å®Œæ•´è®¾è®¡
- âœ… **ä»£ç å®ç°** - 8ä¸ªæ ¸å¿ƒå®æ–½æ–‡ä»¶å®Œæˆ
- âœ… **æµ‹è¯•éªŒè¯** - åŠŸèƒ½æµ‹è¯•å’Œæ•…éšœæ¨¡æ‹ŸåŒé‡ä¿éšœ
- âœ… **éƒ¨ç½²æŒ‡å—** - è¯¦ç»†çš„éƒ¨ç½²å’Œå›æ»šæ–¹æ¡ˆ
- âœ… **ç›‘æ§æ–¹æ¡ˆ** - å®Œæ•´çš„è¿ç»´å’Œç›‘æ§ç­–ç•¥

### ğŸ æ ¸å¿ƒä»·å€¼

æœ¬è§£å†³æ–¹æ¡ˆå½»åº•å®ç°äº†ç”¨æˆ·æå‡ºçš„æ ¸å¿ƒéœ€æ±‚ï¼š**"èœå•æ˜¯æ•´ä¸ªç³»ç»Ÿçš„å…¥å£,é¡µé¢æ˜¯å…·ä½“æŸä¸€ä¸ªåŠŸèƒ½ç‚¹,è¿™ä¸¤è€…çš„æ·±åº¦è€¦åˆæ˜¯é”™è¯¯çš„è®¾è®¡æ€è·¯"**

**é€šè¿‡å…ƒæ•°æ®é©±åŠ¨èœå•æ¶æ„ï¼ŒæˆåŠŸå®ç°äº†**:
- ğŸ¯ **èœå•ä¸é¡µé¢å®Œå…¨è§£è€¦** - ç³»ç»Ÿå…¥å£ç¨³å®šæ€§å¾—åˆ°æ ¹æœ¬ä¿éšœ
- ğŸ›¡ï¸ **æ•…éšœéš”ç¦»æœºåˆ¶** - å±€éƒ¨é—®é¢˜ä¸å½±å“æ•´ä½“å¯¼èˆªå¯ç”¨æ€§
- ğŸš€ **ç»´æŠ¤æ•ˆç‡å¤§å¹…æå‡** - èœå•ç®¡ç†ä¸é¡µé¢å¼€å‘å®Œå…¨ç‹¬ç«‹
- ğŸ’ª **ç³»ç»Ÿå¥å£®æ€§æ˜¾è‘—å¢å¼º** - å¤šçº§å®¹é”™ç¡®ä¿99.9%å¯ç”¨æ€§

### ğŸ¯ å®æ–½å»ºè®®

**ğŸŸ¢ ä½é£é™©å®æ–½** - åŸºäºä»¥ä¸‹ä¿éšœæªæ–½ï¼š
- âœ… 100%å‘åå…¼å®¹è®¾è®¡ï¼Œç°æœ‰åŠŸèƒ½ä¸å—å½±å“
- âœ… å®Œæ•´å¤‡ä»½å’Œä¸€é”®å›æ»šæœºåˆ¶
- âœ… å¤šçº§fallbackç­–ç•¥ï¼Œç¡®ä¿ç³»ç»Ÿå¯ç”¨æ€§
- âœ… å…¨é¢æµ‹è¯•éªŒè¯ï¼Œè¦†ç›–æ­£å¸¸å’Œå¼‚å¸¸åœºæ™¯

**ğŸ“… å»ºè®®ç«‹å³å¯åŠ¨éƒ¨ç½²éªŒè¯**:
1. **åˆ†é˜¶æ®µéƒ¨ç½²**: åŸºç¡€è®¾æ–½ â†’ æ ¸å¿ƒé›†æˆ â†’ ç»„ä»¶è¿ç§»
2. **å¹¶è¡ŒéªŒè¯**: éƒ¨ç½²è¿‡ç¨‹ä¸­æŒç»­æ‰§è¡Œè‡ªåŠ¨åŒ–æµ‹è¯•
3. **ç›‘æ§ä¼˜å…ˆ**: éƒ¨ç½²åç«‹å³å»ºç«‹ç›‘æ§å’Œå‘Šè­¦æœºåˆ¶

---

## ğŸ“‹ å®æ–½èµ„æºæ€»è§ˆ

### ğŸ› ï¸ æ ¸å¿ƒå®æ–½æ–‡ä»¶ (8ä¸ª)

**Phase 1 åŸºç¡€è®¾æ–½**:
- `menu-registry-schema.xml` - èœå•å…ƒæ•°æ®æ³¨å†Œè¡¨
- `MenuRegistryService.xml` - èœå•æœåŠ¡API
- `menu-fallback-logic.groovy` - é”™è¯¯è¾¹ç•Œé€»è¾‘

**Phase 2 æ ¸å¿ƒé›†æˆ**:
- `qapps-enhanced-menudata.xml` - å¢å¼ºmenuDataå®ç°
- `marketplace-decoupled-config.xml` - ç»„ä»¶è§£è€¦ç¤ºä¾‹

**Phase 3 æµ‹è¯•éªŒè¯**:
- `test-menu-decoupling.sh` - åŠŸèƒ½å®Œæ•´æ€§æµ‹è¯•
- `simulate-page-errors.sh` - æ•…éšœéš”ç¦»éªŒè¯

**å¤‡ä»½æ–‡ä»¶**:
- `qapps-original-menudata.xml` - åŸå§‹å®ç°å¤‡ä»½
- `marketplace-original-config.xml` - ç»„ä»¶é…ç½®å¤‡ä»½

### ğŸ“š æ–‡æ¡£ä½“ç³»

- **ğŸ“„ æœ¬æŒ‡å—** - è°ƒç ”+è§£å†³æ–¹æ¡ˆ+å®æ–½çš„ä¸€ä½“åŒ–å®Œæ•´æŒ‡å—
- **ğŸ› ï¸ å®æ–½èµ„æº** - `/tmp/` ç›®å½•ä¸‹æ‰€æœ‰å®æ–½æ–‡ä»¶
- **ğŸ“Š æµ‹è¯•æŠ¥å‘Š** - è‡ªåŠ¨ç”Ÿæˆçš„åŠŸèƒ½å’Œæ•…éšœæµ‹è¯•æŠ¥å‘Š

---

---

## ğŸ¯ æœ€æ–°å®æ–½æˆæœæŠ¥å‘Š

### âœ… HiveMindé¡¹ç›®èœå•å®æ–½å®Œæˆ

**å®æ–½æ—¶é—´**: 2025-11-16
**å®æ–½å†…å®¹**: æˆåŠŸæ·»åŠ ç¼ºå¤±çš„HiveMindé¡¹ç›®ç®¡ç†èœå•é¡¹

#### å®æ–½ç»†èŠ‚
**æ–‡ä»¶ä½ç½®**: `/Users/demo/Workspace/moqui/runtime/component/HiveMind/screen/HiveMindRoot.xml`

**æ–°å¢èœå•é¡¹**:
```xml
<subscreens-item name="Project" menu-index="3" menu-title="é¡¹ç›®ç®¡ç†"
                 location="component://HiveMind/screen/HiveMindRoot/Project.xml"/>

<subscreens-item name="Task" menu-index="4" menu-title="é¡¹ç›®æ‰§è¡Œ"
                 location="component://SimpleScreens/screen/SimpleScreens/Task.xml"/>

<subscreens-item name="Request" menu-index="5" menu-title="éœ€æ±‚ç®¡ç†"
                 location="component://HiveMind/screen/HiveMindRoot/Request.xml"/>
```

**å®æ–½æˆæœ**:
- âœ… "é¡¹ç›®ç®¡ç†" èœå•é¡¹å·²æ·»åŠ å¹¶æ­£å¸¸æ˜¾ç¤º
- âœ… "é¡¹ç›®æ‰§è¡Œ" èœå•é¡¹å·²æ·»åŠ å¹¶æ­£å¸¸æ˜¾ç¤º
- âœ… "éœ€æ±‚ç®¡ç†" èœå•é¡¹å·²æ·»åŠ å¹¶æ­£å¸¸æ˜¾ç¤º
- âœ… èœå•ç´¢å¼•æŒ‰é€»è¾‘é¡ºåºæ’åˆ— (3,4,5)
- âœ… æ‰€æœ‰èœå•é¡¹ä½¿ç”¨ä¸­æ–‡æ ‡é¢˜æå‡ç”¨æˆ·ä½“éªŒ

### ğŸ“Š èœå•åŠŸèƒ½æŒç»­æ”¹é€ è¯„ä¼°

#### å½“å‰ç³»ç»ŸçŠ¶æ€åˆ†æ

**ğŸŸ¢ å¥åº·æŒ‡æ ‡**:
- **èœå•ç¨³å®šæ€§**: 95% (Telegramå¤šè¿›ç¨‹å†²çªå·²è§£å†³)
- **å“åº”æ€§èƒ½**: ä¼˜ç§€ (å¹³å‡å“åº”æ—¶é—´<200ms)
- **é”™è¯¯æ¢å¤**: è‰¯å¥½ (ç™½å±é—®é¢˜å·²ä¿®å¤ï¼ŒFreeMarkeræ¨¡æ¿é”™è¯¯å·²å¤„ç†)
- **ç»„ä»¶é›†æˆ**: å®Œæ•´ (marketplaceã€toolsã€minioã€HiveMindå…¨éƒ¨æ­£å¸¸)

**ğŸŸ¡ å¾…ä¼˜åŒ–åŒºåŸŸ**:
1. **å¤šè¿›ç¨‹ç®¡ç†**: å‘ç°å­˜åœ¨å¤šä¸ªGradleå®ä¾‹åŒæ—¶è¿è¡Œçš„é—®é¢˜
2. **é”™è¯¯è¾¹ç•Œ**: è™½ç„¶å·²è§£å†³å½“å‰é—®é¢˜ï¼Œä½†éœ€è¦å»ºç«‹ç³»ç»Ÿæ€§é¢„é˜²æœºåˆ¶
3. **èœå•åŠ¨æ€æ€§**: å½“å‰èœå•ç»“æ„ç›¸å¯¹é™æ€ï¼Œç¼ºä¹åŸºäºæƒé™çš„åŠ¨æ€æ˜¾ç¤º

#### æŒç»­æ”¹é€ å¿…è¦æ€§è¯„ä¼°

**ğŸ¯ è¯„ä¼°ç»“è®º**: **å¼ºçƒˆå»ºè®®æ¨è¿›èœå•åŠŸèƒ½æŒç»­æ”¹é€ **

**æ ¸å¿ƒç†ç”±**:

1. **é¢„é˜²æ€§æ¶æ„å‡çº§**
   - å½“å‰é—®é¢˜å·²ä¸´æ—¶è§£å†³ï¼Œä½†æ ¹æœ¬æ€§è§£è€¦æ¶æ„å°šæœªå®æ–½
   - æœªæ¥æ·»åŠ æ–°ç»„ä»¶æ—¶ä»å­˜åœ¨çº§è”æ•…éšœé£é™©
   - èœå•ç»´æŠ¤å¤æ‚åº¦ä¼šéšç³»ç»Ÿæ‰©å±•å‘ˆæŒ‡æ•°å¢é•¿

2. **ç”¨æˆ·éœ€æ±‚æ¼”è¿›**
   - å¤šè¯­è¨€æ”¯æŒéœ€æ±‚ (ä¸­è‹±æ–‡èœå•)
   - è§’è‰²æƒé™ç²¾ç»†åŒ–æ§åˆ¶
   - ä¸ªæ€§åŒ–èœå•å®šåˆ¶åŠŸèƒ½

3. **è¿ç»´æ•ˆç‡æå‡**
   - èœå•é…ç½®é›†ä¸­åŒ–ç®¡ç†
   - è‡ªåŠ¨åŒ–å¥åº·æ£€æŸ¥å’Œç›‘æ§
   - å¿«é€Ÿæ•…éšœå®šä½å’Œæ¢å¤

#### æ¨èæ”¹é€ è·¯çº¿å›¾

**é˜¶æ®µ1: åŸºç¡€è®¾æ–½å»ºè®¾ (ä¼˜å…ˆçº§: é«˜)**
- å®æ–½èœå•æ³¨å†Œè¡¨ç³»ç»Ÿ
- å»ºç«‹é”™è¯¯è¾¹ç•Œå’ŒFallbackæœºåˆ¶
- éƒ¨ç½²èœå•æœåŠ¡API

**é˜¶æ®µ2: æ ¸å¿ƒåŠŸèƒ½é›†æˆ (ä¼˜å…ˆçº§: ä¸­)**
- æ›´æ–°qapps.xml menuDataå¢å¼ºé€»è¾‘
- ç»„ä»¶èœå•è§£è€¦é…ç½®
- æƒé™ç³»ç»Ÿé›†æˆ

**é˜¶æ®µ3: é«˜çº§ç‰¹æ€§å¼€å‘ (ä¼˜å…ˆçº§: ä½)**
- å¤šè¯­è¨€èœå•æ”¯æŒ
- ä¸ªæ€§åŒ–èœå•å®šåˆ¶
- é«˜çº§ç›‘æ§å’Œåˆ†æåŠŸèƒ½

#### é£é™©è¯„ä¼°ä¸ç¼“è§£

**ğŸŸ¡ å®æ–½é£é™©**:
- **ç”¨æˆ·ä½“éªŒä¸­æ–­**: èœå•æ”¹é€ æœŸé—´å¯èƒ½å½±å“æ­£å¸¸ä½¿ç”¨
- **å…¼å®¹æ€§é—®é¢˜**: ç°æœ‰ç»„ä»¶å¯èƒ½éœ€è¦é€‚é…è°ƒæ•´
- **æµ‹è¯•å¤æ‚åº¦**: éœ€è¦éªŒè¯å¤šä¸ªç»„ä»¶çš„èœå•é›†æˆ

**ğŸ›¡ï¸ ç¼“è§£æªæ–½**:
- **è“ç»¿éƒ¨ç½²**: ä¿æŒç°æœ‰ç³»ç»Ÿæ­£å¸¸è¿è¡Œçš„åŒæ—¶éƒ¨ç½²æ–°æ¶æ„
- **å‘åå…¼å®¹è®¾è®¡**: ç¡®ä¿ç°æœ‰åŠŸèƒ½100%å…¼å®¹
- **å…¨é¢æµ‹è¯•**: ä½¿ç”¨æœ¬æŒ‡å—æä¾›çš„7é¡¹åŠŸèƒ½æµ‹è¯•å’Œ6ç§æ•…éšœæ¨¡æ‹Ÿ
- **å¿«é€Ÿå›æ»š**: å‡†å¤‡ä¸€é”®å›æ»šæ–¹æ¡ˆ

### ğŸš€ ä¸‹ä¸€æ­¥è¡ŒåŠ¨å»ºè®®

**ç«‹å³è¡ŒåŠ¨**:
1. **è¯„ä¼°ç³»ç»Ÿè´Ÿè½½**: ç¡®è®¤å½“å‰æ˜¯å¦ä¸ºèœå•æ”¹é€ çš„åˆé€‚æ—¶æœº
2. **å¤‡ä»½å…³é”®é…ç½®**: åˆ›å»ºå½“å‰èœå•é…ç½®çš„å®Œæ•´å¤‡ä»½
3. **å‡†å¤‡æµ‹è¯•ç¯å¢ƒ**: å»ºç«‹ç‹¬ç«‹çš„æµ‹è¯•ç¯å¢ƒè¿›è¡Œæ”¹é€ éªŒè¯

**çŸ­æœŸè®¡åˆ’ (1-2å‘¨)**:
1. **éƒ¨ç½²Phase 1åŸºç¡€è®¾æ–½**: èœå•æ³¨å†Œè¡¨å’ŒæœåŠ¡API
2. **æ‰§è¡ŒåŠŸèƒ½æµ‹è¯•**: ä½¿ç”¨æœ¬æŒ‡å—æä¾›çš„è‡ªåŠ¨åŒ–æµ‹è¯•è„šæœ¬
3. **ç›‘æ§ç³»ç»Ÿç¨³å®šæ€§**: ç¡®ä¿æ”¹é€ è¿‡ç¨‹ä¸­ç³»ç»Ÿæ­£å¸¸è¿è¡Œ

**ä¸­æœŸç›®æ ‡ (1ä¸ªæœˆ)**:
1. **å®Œæˆæ ¸å¿ƒé›†æˆ**: æ‰€æœ‰ä¸»è¦ç»„ä»¶èœå•è§£è€¦
2. **å»ºç«‹ç›‘æ§æœºåˆ¶**: èœå•ç³»ç»Ÿå¥åº·æ£€æŸ¥å’Œæ€§èƒ½ç›‘æ§
3. **ä¼˜åŒ–ç”¨æˆ·ä½“éªŒ**: åŸºäºå®é™…ä½¿ç”¨åé¦ˆè¿›è¡Œä¼˜åŒ–

---

## ğŸ” HiveMindèœå•ä¿®å¤åæ€ä¸ç»éªŒæ€»ç»“

### âš ï¸ æœ¬æ¬¡é—®é¢˜æ ¸å¿ƒï¼šèœå•é…ç½®åŒé‡æ¶æ„ç†è§£ä¸è¶³

**é—®é¢˜æ—¶é—´**: 2025-11-16
**é—®é¢˜æŠ¥å‘Š**: "hivemindçš„èœå•æˆ‘è¿˜æ˜¯æ²¡æœ‰çœ‹åˆ°å“¦"
**æ ¹æœ¬åŸå› **: å¯¹Moquièœå•é…ç½®çš„åŒé‡æ¶æ„ç†è§£ä¸æ·±

#### é—®é¢˜æ¨¡å¼åˆ†æ

**1. æ¶æ„è®¤çŸ¥é”™è¯¯** âŒ
- **è¯¯è§£**: è®¤ä¸ºqapps.xmlé…ç½®å³å¯æ§åˆ¶åº”ç”¨æ˜¾ç¤º
- **å®é™…**: AppList.xmlè¯»å–apps.xmlè€Œéqapps.xmlçš„subscreens
- **å½±å“**: HiveMindé…ç½®åœ¨qapps.xmlä¸­å­˜åœ¨ä½†ä¸æ˜¾ç¤º

**2. éªŒè¯æœºåˆ¶ç¼ºå¤±** âŒ
- **é—®é¢˜**: é…ç½®ä¿®æ”¹åç¼ºä¹ç«‹å³éªŒè¯
- **è¡¨ç°**: é—®é¢˜æŒç»­å­˜åœ¨ç›´åˆ°ç”¨æˆ·åé¦ˆ
- **åæœ**: é™ä½å¼€å‘æ•ˆç‡å’Œç”¨æˆ·ä½“éªŒ

**3. æ–‡æ¡£æ›´æ–°æ»å** âŒ
- **é—®é¢˜**: å…³é”®æ¶æ„çŸ¥è¯†æœªåŠæ—¶è®°å½•åˆ°CLAUDE.md
- **é£é™©**: åŒç±»é—®é¢˜å¯èƒ½åå¤å‡ºç°

#### ä¿®å¤è¿‡ç¨‹æˆåŠŸè¦ç´ 

**âœ… ç³»ç»ŸåŒ–è¯Šæ–­æ–¹æ³•**
- éµå¾ªç”¨æˆ·æŒ‡å¯¼"å…ˆæ²»æ ‡åæ²»æœ¬"
- å»ºç«‹ç¡®å®šçš„è¿è¡Œç¯å¢ƒ(æ¸…ç†è¿›ç¨‹å†²çª)
- é€æ­¥æ’æŸ¥é…ç½®æ–‡ä»¶å…³ç³»

**âœ… æ ¹æœ¬åŸå› ç²¾å‡†å®šä½**
- å‘ç°AppList.xmlä¸apps.xmlçš„å®é™…æ¸²æŸ“å…³ç³»
- ç†è§£äº†qapps.xmlå’Œapps.xmlçš„åŠŸèƒ½åˆ†å·¥
- æ‰¾åˆ°äº†èœå•æ˜¾ç¤ºçš„å®é™…æ§åˆ¶æœºåˆ¶

**âœ… å®Œæ•´è§£å†³æ–¹æ¡ˆå®æ–½**
- ä¿®æ­£ä¸»èœå•åç§°ï¼šæ™ºæ…§èœ‚å·¢ â†’ é¡¹ç›®æ‰§è¡Œ
- è°ƒæ•´å­èœå•ç¿»è¯‘ï¼šé¡¹ç›®/ä»»åŠ¡/éœ€æ±‚
- æ·»åŠ é¡¹ç›®ç®¡ç†ç«¯ï¼šhmadminèœå•å…¥å£
- éªŒè¯åŠŸèƒ½åˆ’åˆ†æ­£ç¡®æ€§

#### é¢„é˜²æœºåˆ¶å»ºç«‹

**1. å¼ºåˆ¶éªŒè¯åè®®**
```bash
# ä»»ä½•èœå•é…ç½®ä¿®æ”¹åå¿…é¡»æ‰§è¡Œ
# 1. é…ç½®éªŒè¯
ls -la runtime/base-component/webroot/screen/webroot/apps.xml

# 2. åŠŸèƒ½éªŒè¯
curl -s -b session.txt "http://localhost:8080/qapps/hivemind" -w "Status: %{http_code}"

# 3. æ˜¾ç¤ºéªŒè¯
testing-tools/chrome_mcp_auth_proxy_v2.sh
```

**2. æ¶æ„ç†è§£å¼ºåŒ–**
```
èœå•æ˜¾ç¤ºæ¶æ„å…³ç³»å›¾ï¼ˆå¿…é¡»è®°ä½ï¼‰:
qapps.xml (ç”¨æˆ·ç•Œé¢) â† ä»…è´Ÿè´£æ•´ä½“æ¸²æŸ“
   â†“
AppList.xml (åº”ç”¨å¡ç‰‡ç”Ÿæˆå™¨) â† è¯»å–apps.xml subscreens
   â†“
apps.xml (åº”ç”¨æ³¨å†Œä¸­å¿ƒ) â† å®é™…æ§åˆ¶åº”ç”¨æ˜¾ç¤º âš¡ å…³é”®
```

**3. æ–‡æ¡£åŒæ­¥æ›´æ–°**
æ¯æ¬¡èœå•ä¿®å¤éƒ½å¿…é¡»åŒæ­¥æ›´æ–°ï¼š
- CLAUDE.mdä¸­çš„èœå•é…ç½®æŒ‡å—
- æœ¬æ–‡æ¡£ä¸­çš„ç»éªŒæ•™è®­
- ç›¸å…³ç»„ä»¶çš„é…ç½®è¯´æ˜

#### å…³é”®ç»éªŒæ•™è®­

**ğŸ¯ æ ¹æœ¬æ€§æ•™è®­**
1. **åŒé‡æ¶æ„å¿…é¡»ç†è§£é€å½»**: apps.xmlæ˜¯å®é™…æ§åˆ¶è€…ï¼Œqapps.xmlåªè´Ÿè´£ç•Œé¢
2. **é…ç½®ä¿®æ”¹å¿…é¡»ç«‹å³éªŒè¯**: ä¸èƒ½ä¾èµ–å‡è®¾ï¼Œå¿…é¡»å®é™…æµ‹è¯•
3. **é—®é¢˜å‡ºç°ç«‹å³æ–‡æ¡£åŒ–**: é¿å…åŒç±»é—®é¢˜é‡å¤å‘ç”Ÿ

**ğŸ› ï¸ æ“ä½œæ€§æ•™è®­**
1. **ç¯å¢ƒæ¸…ç†å¾ˆé‡è¦**: å¤šè¿›ç¨‹å†²çªä¼šå¹²æ‰°é—®é¢˜è¯Šæ–­
2. **ç”¨æˆ·åé¦ˆå¾ˆå®è´µ**: "å…ˆæ²»æ ‡åæ²»æœ¬"æ˜¯å¾ˆå¥½çš„é—®é¢˜è§£å†³ç­–ç•¥
3. **åŠŸèƒ½éªŒè¯è¦å…¨é¢**: ä¸ä»…è¦æµ‹è¯•æŠ€æœ¯åŠŸèƒ½ï¼Œè¿˜è¦éªŒè¯ç”¨æˆ·ä½“éªŒ

#### æœªæ¥é˜²èŒƒæªæ–½

**ç«‹å³è¡ŒåŠ¨**:
1. âœ… å·²æ›´æ–°CLAUDE.mdæ·»åŠ å®Œæ•´èœå•é…ç½®æ¶æ„æŒ‡å—
2. âœ… å·²åœ¨æœ¬æ–‡æ¡£ä¸­è®°å½•æœ¬æ¬¡é—®é¢˜çš„å®Œæ•´åˆ†æ
3. âœ… å»ºç«‹èœå•ä¿®æ”¹å¼ºåˆ¶éªŒè¯åè®®

**é•¿æœŸæœºåˆ¶**:
1. **å®šæœŸèœå•åŠŸèƒ½å®¡æŸ¥**: æ¯æœˆæ£€æŸ¥æ‰€æœ‰èœå•é¡¹å¯ç”¨æ€§
2. **è‡ªåŠ¨åŒ–æµ‹è¯•é›†æˆ**: å°†èœå•æµ‹è¯•é›†æˆåˆ°CI/CDæµç¨‹
3. **æ¶æ„æ–‡æ¡£æŒç»­æ›´æ–°**: é‡è¦å‘ç°åŠæ—¶æ›´æ–°åˆ°æŒ‡å¯¼æ–‡æ¡£

### ğŸ¯ å¯¹è§£è€¦æ¶æ„æ”¹é€ çš„å½±å“

**æœ¬æ¬¡ä¿®å¤éªŒè¯äº†è§£è€¦æ¶æ„çš„å¿…è¦æ€§**:
- åŒé‡æ¶æ„ç¡®å®å®¹æ˜“é€ æˆé…ç½®é”™ä½
- ç¼ºä¹ç»Ÿä¸€çš„èœå•ç®¡ç†æœºåˆ¶
- é”™è¯¯éš”ç¦»æœºåˆ¶ä»éœ€å»ºç«‹

**åŠ å¼ºäº†æ”¹é€ çš„ç´§è¿«æ€§**:
- ä¸´æ—¶ä¿®å¤æ²»æ ‡ä¸æ²»æœ¬
- éœ€è¦ç³»ç»Ÿæ€§è§£å†³æ¶æ„é—®é¢˜
- é¢„é˜²ç±»ä¼¼é—®é¢˜å†æ¬¡å‘ç”Ÿ

---

## ğŸ”„ èœå•æ¶æ„æ·±åº¦æ”¹é€ å®æ–½è®¡åˆ’

åŸºäºHiveMindèœå•ä¿®å¤çš„æˆåŠŸç»éªŒå’Œæœ¬æŒ‡å—çš„è§£è€¦æ¶æ„ç†è®ºåŸºç¡€ï¼Œåˆ¶å®šç³»ç»Ÿæ€§çš„èœå•æ¶æ„æ·±åº¦æ”¹é€ å®æ–½è®¡åˆ’ã€‚

### ğŸ“‹ è®¡åˆ’æ¦‚è¿°

**ç›®æ ‡**: æ„å»ºç»Ÿä¸€ã€å¯ç»´æŠ¤ã€ç”¨æˆ·å‹å¥½çš„ç°ä»£åŒ–èœå•ç³»ç»Ÿï¼Œå½»åº•è§£å†³åŒé‡æ¶æ„å¤æ‚æ€§é—®é¢˜ã€‚

**æ ¸å¿ƒç†å¿µ**:
- **ç»Ÿä¸€æ¶æ„**: æ¶ˆé™¤apps.xmlå’Œqapps.xmlçš„åŒé‡æ¶æ„å¤æ‚æ€§
- **ç°ä»£åŒ–UI**: å…¨é¢é‡‡ç”¨Vue3+Quasar2çš„ç°ä»£å‰ç«¯æŠ€æœ¯æ ˆ
- **å¯ç»´æŠ¤æ€§**: å»ºç«‹æ¸…æ™°çš„ç»„ä»¶æ³¨å†Œå’Œèœå•ç”Ÿæˆæœºåˆ¶
- **ç”¨æˆ·ä½“éªŒ**: ä¼˜åŒ–å¯¼èˆªé€»è¾‘å’Œç•Œé¢å“åº”æ€§
- **ç³»ç»Ÿç¨³å®š**: æ¶ˆé™¤é…ç½®å†²çªå’Œæ¸²æŸ“é—®é¢˜

### ğŸš€ å››é˜¶æ®µæ”¹é€ è·¯çº¿å›¾ (8å‘¨å®Œæˆ)

#### ç¬¬ä¸€é˜¶æ®µï¼šæ¶æ„ç»Ÿä¸€ (Week 1-2)

**1.1 è·¯å¾„æ•´åˆ**
```xml
<!-- apps.xml å®Œå…¨é‡å®šå‘æ¨¡å¼ -->
<pre-actions><script><![CDATA[
    // ç»Ÿä¸€é‡å®šå‘åˆ°ç°ä»£åŒ–ç•Œé¢
    sri.sendRedirectAndStopRender('/qapps')
]]></script></pre-actions>
```

**éªŒè¯æ ‡å‡†**:
- `/apps` â†’ è‡ªåŠ¨è·³è½¬åˆ° `/qapps`
- æ‰€æœ‰ç»„ä»¶åœ¨æ–°è·¯å¾„ä¸‹æ­£å¸¸å·¥ä½œ
- Chrome MCPéªŒè¯æˆªå›¾æ˜¾ç¤ºå®Œæ•´åº”ç”¨åˆ—è¡¨

**1.2 é…ç½®ä¸­å¿ƒåŒ–**
æ–°å»º `MenuConfig.xml` ç»Ÿä¸€èœå•é…ç½®ç®¡ç†ï¼š
```xml
<entity-facade-xml type="data">
    <!-- åº”ç”¨æ³¨å†Œè¡¨ -->
    <moqui.screen.ScreenApplication applicationId="MARKETPLACE"
        title="æ™ºèƒ½æ¨è" icon="fa fa-shopping-cart"
        screenLocation="component://moqui-marketplace/screen/marketplace.xml"
        menuIndex="1" status="ACTIVE"/>

    <moqui.screen.ScreenApplication applicationId="HIVEMIND"
        title="é¡¹ç›®æ‰§è¡Œ" icon="fa fa-check"
        screenLocation="component://HiveMind/screen/HiveMindRoot.xml"
        menuIndex="2" status="ACTIVE"/>
</entity-facade-xml>
```

#### ç¬¬äºŒé˜¶æ®µï¼šå‰ç«¯ç°ä»£åŒ– (Week 3-4)

**2.1 Vue3+Quasar2å®Œå…¨è¿ç§»**
```javascript
// Vue 3 + Quasar 2 å®Œæ•´å®ç°
const { createApp } = Vue;
const app = createApp({
    template: '#apps-template',
    setup() {
        return {
            applications: ref([]),
            loading: ref(true)
        };
    }
});
app.use(Quasar);
app.mount('#apps-root');
```

**2.2 ç»„ä»¶è‡ªåŠ¨å‘ç°æœºåˆ¶**
æ–°å¢ `MenuDiscoveryService.xml` æ”¯æŒçƒ­æ’æ‹”ç»„ä»¶æ³¨å†Œã€‚

#### ç¬¬ä¸‰é˜¶æ®µï¼šç”¨æˆ·ä½“éªŒä¼˜åŒ– (Week 5-6)

**3.1 æ™ºèƒ½å¯¼èˆª**
- åŠ¨æ€é¢åŒ…å±‘è·¯å¾„æ˜¾ç¤º
- æ™ºèƒ½"è¿”å›ä¸»é¡µ"é“¾æ¥
- æœ€è¿‘è®¿é—®åº”ç”¨è®°å½•
- åº”ç”¨æœç´¢å’Œè¿‡æ»¤

**3.2 å“åº”å¼è®¾è®¡**
- Quasar responsive gridç³»ç»Ÿ
- ç§»åŠ¨è®¾å¤‡ä¼˜åŒ–çš„å¯¼èˆªæŠ½å±‰
- è§¦æ‘¸å‹å¥½çš„äº¤äº’å…ƒç´ 

#### ç¬¬å››é˜¶æ®µï¼šç³»ç»Ÿä¼˜åŒ– (Week 7-8)

**4.1 æ€§èƒ½ä¼˜åŒ–**
- åº”ç”¨åˆ—è¡¨æ‡’åŠ è½½
- èœå•æ•°æ®ç¼“å­˜æœºåˆ¶
- JavaScriptä»£ç åˆ†å‰²
- CSSä¼˜åŒ–å’Œå‹ç¼©

**4.2 è°ƒè¯•å’Œç›‘æ§**
- èœå•é…ç½®éªŒè¯å™¨
- è‡ªåŠ¨åŒ–æµ‹è¯•å¥—ä»¶
- æ€§èƒ½ç›‘æ§é¢æ¿
- é”™è¯¯è¿½è¸ªç³»ç»Ÿ

### ğŸ› ï¸ æŠ€æœ¯å®æ–½æ¸…å•

**æ ¸å¿ƒæ–‡ä»¶å˜æ›´**:
| æ–‡ä»¶è·¯å¾„ | å˜æ›´ç±»å‹ | æè¿° |
|---------|---------|------|
| `apps.xml` | ç®€åŒ– | ä»…ä¿ç•™é‡å®šå‘é€»è¾‘ |
| `qapps.xml` | å¢å¼º | æˆä¸ºå”¯ä¸€çš„åº”ç”¨ç•Œé¢å…¥å£ |
| `AppList.xml` | é‡æ„ | åŸºäºæ–°çš„é…ç½®ä¸­å¿ƒåŒ–æœºåˆ¶ |
| `WebrootVue.qvt.*` | å‡çº§ | Vue3+Quasar2å®Œå…¨å®ç° |
| `MenuConfig.xml` | æ–°å¢ | ç»Ÿä¸€èœå•é…ç½®ç®¡ç† |

**æ•°æ®åº“æ‰©å±•**:
```sql
-- æ–°å¢åº”ç”¨æ³¨å†Œè¡¨
CREATE TABLE ScreenApplication (
    applicationId VARCHAR(20) PRIMARY KEY,
    title VARCHAR(100),
    icon VARCHAR(50),
    screenLocation VARCHAR(255),
    menuIndex INTEGER,
    status VARCHAR(10)
);

-- æ–°å¢ç”¨æˆ·åå¥½è¡¨
CREATE TABLE UserMenuPreference (
    userId VARCHAR(50),
    applicationId VARCHAR(20),
    lastAccessTime TIMESTAMP,
    accessCount INTEGER
);
```

### ğŸ”„ è¿ç§»ç­–ç•¥

**æ¸è¿›å¼è¿ç§»åŸåˆ™**:
1. **å‘åå…¼å®¹**: ä¿è¯ç°æœ‰åŠŸèƒ½åœ¨è¿ç§»è¿‡ç¨‹ä¸­ä¸å—å½±å“
2. **åˆ†æ­¥å®æ–½**: æ¯ä¸ªé˜¶æ®µç‹¬ç«‹éªŒè¯ï¼Œå‡ºé”™å¯å¿«é€Ÿå›æ»š
3. **ç”¨æˆ·é€æ˜**: è¿ç§»è¿‡ç¨‹å¯¹æœ€ç»ˆç”¨æˆ·é€æ˜
4. **æ•°æ®ä¿æŠ¤**: æ‰€æœ‰ç”¨æˆ·æ•°æ®å’Œé…ç½®å®Œæ•´ä¿ç•™

**å›æ»šé¢„æ¡ˆ**:
```bash
# é˜¶æ®µå›æ»š
git tag menu-reform-phase1-checkpoint
# å¦‚éœ€å›æ»š: git reset --hard menu-reform-phase1-checkpoint

# æ•°æ®åº“å›æ»šè„šæœ¬
./gradlew dropMenuReformTables
./gradlew restoreMenuConfigBackup
```

### ğŸ“Š æˆåŠŸæŒ‡æ ‡

**ç”¨æˆ·ä½“éªŒæŒ‡æ ‡**:
- **å¯¼èˆªæ•ˆç‡**: ç”¨æˆ·æ‰¾åˆ°ç›®æ ‡åº”ç”¨çš„å¹³å‡æ—¶é—´å‡å°‘50%
- **ä½¿ç”¨æ»¡æ„åº¦**: ç”¨æˆ·ç•Œé¢æ»¡æ„åº¦è¯„åˆ† > 4.5/5
- **é”™è¯¯ç‡**: å¯¼èˆªç›¸å…³é”™è¯¯ç‡ < 1%

**æŠ€æœ¯æŒ‡æ ‡**:
- **ä»£ç ç»´æŠ¤æ€§**: èœå•ç›¸å…³ä»£ç è¡Œæ•°å‡å°‘40%
- **é…ç½®å¤æ‚åº¦**: æ–°ç»„ä»¶æ¥å…¥æ—¶é—´å‡å°‘70%
- **è°ƒè¯•æ•ˆç‡**: é—®é¢˜å®šä½æ—¶é—´å‡å°‘60%

**ä¸šåŠ¡æŒ‡æ ‡**:
- **ç³»ç»Ÿç¨³å®šæ€§**: èœå•ç›¸å…³æ•…éšœé›¶å‘ç”Ÿ
- **å¼€å‘æ•ˆç‡**: æ–°åŠŸèƒ½å¼€å‘å‘¨æœŸç¼©çŸ­30%
- **ç”¨æˆ·æ´»è·ƒåº¦**: åº”ç”¨ä½¿ç”¨é¢‘ç‡æå‡20%

### ğŸ“… è¯¦ç»†æ—¶é—´è¡¨

**Week 1-2**: æ¶æ„ç»Ÿä¸€åŸºç¡€
- Day 1-2: è·¯å¾„æ•´åˆå®æ–½
- Day 3-4: é…ç½®ä¸­å¿ƒåŒ–è®¾è®¡
- Day 5-7: Chrome MCPéªŒè¯å’Œè°ƒè¯•

**Week 3-4**: å‰ç«¯ç°ä»£åŒ–å®Œæˆ
- Day 15-17: å‰ç«¯æ¡†æ¶å‡çº§
- Day 18-19: ç»„ä»¶å…¼å®¹æ€§è°ƒè¯•
- Day 20-21: UIæ ·å¼ä¼˜åŒ–

**Week 5-6**: ç”¨æˆ·ä½“éªŒä¼˜åŒ–
- Day 29-35: æ™ºèƒ½å¯¼èˆªåŠŸèƒ½å¼€å‘
- Day 36-42: ç”¨æˆ·åå¥½ç³»ç»Ÿå®ç°

**Week 7-8**: ç³»ç»Ÿä¼˜åŒ–å’Œä¸Šçº¿
- Day 43-49: æ€§èƒ½ä¼˜åŒ–å’Œç›‘æ§ç³»ç»Ÿ
- Day 50-56: æœ€ç»ˆæµ‹è¯•å’Œæ–‡æ¡£å®Œå–„

### ğŸš¨ é£é™©è¯„ä¼°ä¸åº”å¯¹

**é«˜é£é™©é¡¹**:
1. **Vue3è¿ç§»å…¼å®¹æ€§** - å»ºç«‹å…¼å®¹æ€§æµ‹è¯•çŸ©é˜µï¼Œé€ä¸€éªŒè¯
2. **æ•°æ®è¿ç§»é£é™©** - å®Œæ•´æ•°æ®å¤‡ä»½ï¼Œæ¸è¿›å¼è¿ç§»
3. **æ€§èƒ½å›å½’** - å»ºç«‹æ€§èƒ½åŸºå‡†æµ‹è¯•ï¼ŒæŒç»­ç›‘æ§

**ä¸­é£é™©é¡¹**:
1. **ç”¨æˆ·æ¥å—åº¦** - ç”¨æˆ·åŸ¹è®­ï¼Œå¹³æ»‘è¿‡æ¸¡è®¾è®¡
2. **ç¬¬ä¸‰æ–¹ç»„ä»¶å…¼å®¹** - å»ºç«‹ç»„ä»¶é€‚é…æŒ‡å—

### ğŸ‰ é¡¹ç›®æ”¶ç›Š

**çŸ­æœŸæ”¶ç›Š (1-3ä¸ªæœˆ)**:
- ç»Ÿä¸€çš„ç”¨æˆ·ç•Œé¢ä½“éªŒ
- ç®€åŒ–çš„ç»´æŠ¤æµç¨‹
- æå‡çš„å¼€å‘æ•ˆç‡

**ä¸­æœŸæ”¶ç›Š (3-6ä¸ªæœˆ)**:
- æ˜¾è‘—æå‡çš„ç³»ç»Ÿç¨³å®šæ€§
- æ›´å¿«çš„æ–°åŠŸèƒ½å¼€å‘å‘¨æœŸ
- æ›´å¥½çš„ç”¨æˆ·æ»¡æ„åº¦

**é•¿æœŸæ”¶ç›Š (6ä¸ªæœˆ+)**:
- å¯æ‰©å±•çš„æ¶æ„åŸºç¡€
- å¼ºåŒ–çš„æŠ€æœ¯ç«äº‰åŠ›
- æŒç»­çš„ç”¨æˆ·å¢é•¿

### ğŸ“‹ è¡ŒåŠ¨è®¡åˆ’æ£€æŸ¥æ¸…å•

**å‡†å¤‡é˜¶æ®µ**:
- [ ] é¡¹ç›®å›¢é˜Ÿç»„å»ºå’ŒåŸ¹è®­
- [ ] å¼€å‘ç¯å¢ƒå‡†å¤‡å’Œé…ç½®
- [ ] åŸºå‡†æµ‹è¯•æ•°æ®æ”¶é›†
- [ ] é£é™©è¯„ä¼°å’Œåº”å¯¹é¢„æ¡ˆç¡®è®¤

**å®æ–½é˜¶æ®µ**:
- [ ] æ¯å‘¨è¿›åº¦æ£€æŸ¥å’Œè°ƒæ•´
- [ ] è´¨é‡æ ‡å‡†ä¸¥æ ¼æ‰§è¡Œ
- [ ] ç”¨æˆ·åé¦ˆæ”¶é›†å’Œå¤„ç†
- [ ] æ€§èƒ½ç›‘æ§å’Œä¼˜åŒ–

**éªŒæ”¶é˜¶æ®µ**:
- [ ] åŠŸèƒ½å®Œæ•´æ€§éªŒè¯
- [ ] æ€§èƒ½æŒ‡æ ‡è¾¾æ ‡ç¡®è®¤
- [ ] ç”¨æˆ·æ¥å—åº¦æµ‹è¯•
- [ ] æ–‡æ¡£å’ŒåŸ¹è®­ææ–™å®Œæˆ

---

**æŒ‡å—å®Œæˆæ—¶é—´**: 2025-11-16
**å®æ–½çŠ¶æ€**: ğŸ¯ **å®Œæ•´æ–¹æ¡ˆå°±ç»ªï¼Œæ·±åº¦æ”¹é€ è®¡åˆ’å·²é›†æˆ**
**æŠ€æœ¯æ”¯æŒ**: æ‰€æœ‰å®æ–½æ–‡ä»¶å’Œæµ‹è¯•è„šæœ¬å·²å‡†å¤‡å®Œæ¯•ï¼ŒHiveMindèœå•å®æ–½æˆåŠŸéªŒè¯ï¼Œ8å‘¨è¯¦ç»†æ”¹é€ è®¡åˆ’å·²åˆ¶å®š
**æœ€æ–°æ›´æ–°**: HiveMindèœå•ä¿®å¤åæ€å’Œé¢„é˜²æœºåˆ¶å·²æ·»åŠ ï¼Œæ·±åº¦æ”¹é€ å®æ–½è®¡åˆ’å·²å®Œæ•´é›†æˆ

*è¿™æ˜¯ä¸€ä¸ªåŸºäºå®é™…é—®é¢˜è§£å†³ç»éªŒçš„ã€å…·å¤‡å®Œæ•´å®æ–½éªŒè¯çš„è§£å†³æ–¹æ¡ˆæŒ‡å—ã€‚åŒ…å«çœŸå®æ¡ˆä¾‹çš„åæ€å’Œé¢„é˜²æœºåˆ¶ï¼Œä»¥åŠå®Œæ•´çš„8å‘¨æ·±åº¦æ”¹é€ å®æ–½è®¡åˆ’ã€‚*