# 前端集成测试指南

## 🚀 快速开始

前端应用现在已经集成了新的小说处理功能。以下是测试指南：

### 1. 启动应用

前端应用应该已经在运行。如果没有，请运行：

```bash
cd frontend/NovelAnimeDesktop
npm run dev
```

### 2. 访问测试页面

在应用中导航到测试页面来验证新组件：

**URL**: `http://localhost:5174/#/test`

或者在应用内导航：
1. 打开开发者工具 (F12)
2. 在控制台输入：`window.location.hash = '/test'`

### 3. 测试功能

#### 3.1 小说导入组件测试
- **位置**: 测试页面第一个区块
- **功能**: 
  - 文本输入模式
  - 文件上传模式（拖拽支持）
  - 字数统计
  - 积分成本预估
- **测试步骤**:
  1. 切换"文本输入"和"文件上传"标签
  2. 在文本区域输入内容，观察字数统计
  3. 尝试拖拽文件到上传区域
  4. 点击"开始导入"按钮

#### 3.2 流水线状态组件测试
- **位置**: 测试页面第二个区块
- **功能**:
  - 4阶段流程可视化
  - 进度跟踪
  - 阶段详情展开
  - 实时状态更新
- **测试步骤**:
  1. 观察流水线状态显示
  2. 点击"创建处理流水线"按钮
  3. 点击各个阶段查看详情
  4. 观察进度条和状态变化

#### 3.3 角色画廊组件测试
- **位置**: 测试页面第三个区块
- **功能**:
  - 角色卡片展示
  - 角色过滤
  - 角色编辑
  - 角色锁定/解锁
- **测试步骤**:
  1. 点击"提取角色"按钮
  2. 使用过滤器筛选角色
  3. 点击角色卡片查看详情
  4. 测试角色编辑功能

#### 3.4 场景编辑器组件测试
- **位置**: 测试页面第四个区块
- **功能**:
  - 场景卡片展示
  - 场景状态过滤
  - 场景编辑和审批
  - AI场景增强
- **测试步骤**:
  1. 点击"AI场景增强"按钮
  2. 使用状态过滤器筛选场景
  3. 点击场景卡片查看详情
  4. 测试场景编辑和审批功能

#### 3.5 集数管理器组件测试
- **位置**: 测试页面第五个区块
- **功能**:
  - 集数列表展示
  - 集数统计信息
  - 剧本生成和预览
  - 集数编辑功能
- **测试步骤**:
  1. 点击"生成集数"按钮
  2. 点击集数卡片查看详情
  3. 测试剧本生成功能
  4. 测试集数编辑功能

### 4. 事件监控

测试页面底部有一个事件日志区域，会实时显示所有组件事件：
- **绿色**: 成功事件
- **红色**: 错误事件  
- **灰色**: 信息事件

## 🔧 开发模式特性

### 模拟数据支持
当后端API不可用时，前端会自动使用模拟数据：
- 项目列表: 空数组
- 小说列表: 空数组
- 角色列表: 空数组
- 积分余额: 1000

### 跳过认证
开发模式下会跳过用户认证，直接进入主界面。

### API错误处理
网络错误会被捕获并显示友好的错误信息。

## 📱 界面导航

### 主要页面
1. **仪表盘** (`/dashboard`) - 项目概览
2. **工作流** (`/workflow`) - 工作流编辑器
3. **资源库** (`/assets`) - 资源管理
4. **角色管理** (`/characters`) - 角色管理
5. **测试页面** (`/test`) - 组件测试

### 项目详情页面
- **路径**: `/project/:id/detail`
- **功能**: 集成了所有新组件的完整项目管理界面
- **标签页**:
  - 小说管理
  - 处理流水线  
  - 角色管理
  - 场景管理（待开发）
  - 集数管理（待开发）

## 🐛 已知问题

### 1. 后端连接
- 如果后端服务未运行，会显示模拟数据
- API调用会有5秒超时
- 网络错误会自动降级到模拟模式

### 2. Sass警告
- 控制台会显示Sass @import的弃用警告
- 这不影响功能，只是版本兼容性提醒

### 3. 组件状态
- 某些组件可能显示"功能正在开发中"
- 这是正常的，表示该功能尚未完全实现

## 🔍 调试技巧

### 1. 浏览器开发者工具
```javascript
// 检查Vue组件状态
window.__VUE_DEVTOOLS_GLOBAL_HOOK__

// 检查API服务
window.apiService = require('./services/api').apiService

// 手动触发API调用
apiService.testConnection()
```

### 2. 控制台日志
应用会输出详细的调试信息：
- API调用状态
- 组件生命周期
- 错误信息
- 模拟数据使用情况

### 3. 网络面板
检查Network面板查看API请求：
- 成功请求: 200状态码
- 网络错误: Failed状态
- 模拟响应: 会在控制台显示"Mock response"

## 📋 测试清单

### 基础功能测试
- [ ] 应用正常启动
- [ ] 页面路由正常工作
- [ ] 组件正常渲染
- [ ] 事件日志正常记录

### 小说导入测试
- [ ] 文本输入模式工作
- [ ] 文件上传模式工作
- [ ] 字数统计准确
- [ ] 成本预估显示
- [ ] 导入按钮响应

### 流水线测试
- [ ] 流水线状态显示
- [ ] 阶段详情展开
- [ ] 进度条更新
- [ ] 创建流水线功能

### 角色管理测试
- [ ] 角色列表显示
- [ ] 角色过滤工作
- [ ] 角色详情查看
- [ ] 角色编辑功能
- [ ] 角色锁定功能

### 场景管理测试
- [ ] 场景列表显示
- [ ] 场景状态过滤
- [ ] 场景详情查看
- [ ] 场景编辑功能
- [ ] 场景审批功能
- [ ] AI场景增强

### 集数管理测试
- [ ] 集数列表显示
- [ ] 集数统计信息
- [ ] 集数详情查看
- [ ] 集数编辑功能
- [ ] 剧本生成功能
- [ ] 剧本导出功能

### 错误处理测试
- [ ] 网络错误处理
- [ ] API超时处理
- [ ] 模拟数据降级
- [ ] 用户友好错误提示

## 🎯 下一步

1. **完善后端连接**: 启动Moqui后端服务进行完整测试
2. **添加更多组件**: 场景编辑器、集数管理器
3. **优化用户体验**: 加载状态、错误恢复
4. **添加单元测试**: 组件测试覆盖

---

**测试完成后，请在事件日志中查看所有交互记录，这将帮助识别任何潜在问题。**