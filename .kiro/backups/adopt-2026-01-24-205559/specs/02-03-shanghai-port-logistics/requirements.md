# 上海港集装箱运输供需系统需求文档

## 介绍

上海港集装箱运输供需系统是一个面向集装箱卡车司机和货主的移动端应用，提供智能订单匹配、实时运输追踪和便捷结算功能。系统采用深色主题设计，适合司机在各种光线环境下使用。

## 术语表

- **集卡司机**: 集装箱卡车司机，系统的主要用户
- **货主**: 发布运输需求的企业或个人
- **订单大厅**: 显示可接订单的主页面
- **沪牌**: 上海牌照，在某些区域有通行优势
- **40GP**: 40英尺标准集装箱
- **堆场**: 集装箱存放和装卸的场所
- **铅封**: 集装箱安全封条

## 需求

### 需求1

**用户故事**: 作为集卡司机，我想要查看可接的运输订单，以便选择合适的货运任务。

#### 验收标准

1. WHEN 司机打开应用 THEN 系统应显示订单大厅页面，包含可接订单列表
2. WHEN 司机查看订单列表 THEN 系统应显示订单号、起终点、运费、车型要求等关键信息
3. WHEN 司机下拉刷新 THEN 系统应获取最新的可接订单
4. WHEN 司机点击订单卡片 THEN 系统应显示订单详细信息
5. WHEN 司机长按订单卡片 THEN 系统应弹出操作菜单（屏蔽货主/收藏路线）

### 需求2

**用户故事**: 作为集卡司机，我想要筛选符合我车辆条件的订单，以便提高接单效率。

#### 验收标准

1. WHEN 司机设置筛选条件 THEN 系统应按港区、车型、沪牌等条件过滤订单
2. WHEN 司机选择车型筛选 THEN 系统应只显示匹配该车型的订单
3. WHEN 司机选择沪牌筛选 THEN 系统应只显示需要沪牌的订单
4. WHEN 司机清除筛选条件 THEN 系统应显示所有可接订单
5. WHEN 司机保存筛选偏好 THEN 系统应在下次打开时应用相同筛选条件

### 需求3

**用户故事**: 作为集卡司机，我想要接受订单并执行运输任务，以便完成工作并获得收入。

#### 验收标准

1. WHEN 司机点击"接受订单"按钮 THEN 系统应确认接单并进入订单执行页面
2. WHEN 司机进入订单执行页 THEN 系统应显示5步进度条（已接单→前往堆场→确认提箱→运输中→完成）
3. WHEN 司机到达堆场 THEN 系统应允许司机确认提箱操作
4. WHEN 司机确认提箱 THEN 系统应要求输入集装箱号、铅封号并拍摄照片
5. WHEN 司机完成运输 THEN 系统应更新订单状态为完成并结算运费

### 需求4

**用户故事**: 作为集卡司机，我想要使用地图导航功能，以便找到最优路线到达目的地。

#### 验收标准

1. WHEN 司机需要导航 THEN 系统应集成高德地图提供导航服务
2. WHEN 系统规划路线 THEN 系统应考虑集卡限高、限重等特殊限制
3. WHEN 司机查看地图 THEN 系统应显示上海港区专属图层（码头、闸口、停车场）
4. WHEN 司机在运输过程中 THEN 系统应提供实时位置追踪
5. WHEN 司机偏离路线 THEN 系统应自动重新规划路线

### 需求5

**用户故事**: 作为集卡司机，我想要管理我的个人信息和钱包，以便查看收入和提现。

#### 验收标准

1. WHEN 司机访问个人页面 THEN 系统应显示车牌号、等级徽章和个人信息
2. WHEN 司机查看钱包 THEN 系统应显示可用余额、在途运费、今日收入、本周收入
3. WHEN 司机申请提现 THEN 系统应支持快速提现功能
4. WHEN 司机查看订单历史 THEN 系统应显示已完成和进行中的订单
5. WHEN 司机管理证件 THEN 系统应支持上传和管理驾驶证、行驶证等证件

### 需求6

**用户故事**: 作为货主，我想要发布运输需求，以便找到合适的司机完成运输任务。

#### 验收标准

1. WHEN 货主发布订单 THEN 系统应提供路线选择器支持级联选择起运港-目的港
2. WHEN 货主选择箱型 THEN 系统应提供可视化图标选择界面
3. WHEN 货主设置特殊要求 THEN 系统应支持沪牌、液压尾板、熟悉港区等标签
4. WHEN 货主填写完整信息 THEN 发布按钮应变为可用状态
5. WHEN 货主发布成功 THEN 系统应将订单推送给符合条件的司机

### 需求7

**用户故事**: 作为司机，我想要接收相关的订单推送，以便及时了解新的运输机会。

#### 验收标准

1. WHEN 有新订单发布 THEN 系统应根据司机车型筛选匹配订单
2. WHEN 推送订单 THEN 系统应根据牌照类型（沪牌/非沪牌）筛选
3. WHEN 计算推送范围 THEN 系统应只推送距离50公里内的订单
4. WHEN 司机设置推送偏好 THEN 系统应支持推送开关、距离范围设置
5. WHEN 司机查看推送历史 THEN 系统应保存推送历史记录

### 需求8

**用户故事**: 作为用户，我想要在网络异常时仍能使用基本功能，以便保证工作连续性。

#### 验收标准

1. WHEN 网络连接异常 THEN 系统应在页面顶部显示非阻塞式提示条
2. WHEN 用户进行操作 THEN 系统应将已操作数据缓存到本地（IndexedDB）
3. WHEN 网络恢复 THEN 系统应自动同步本地缓存的数据
4. WHEN 离线状态下 THEN 系统应支持查看已缓存的订单信息
5. WHEN 关键操作需要网络 THEN 系统应提示用户检查网络连接