import{u as Y}from"./_plugin-vue_export-helper-BFgqyxDe.js";import{d as l,r as d,w as F}from"./runtime-core.esm-bundler-8-XbLWPr.js";const b={welcome:{id:"welcome",name:"欢迎使用小说动漫生成器",description:"让我们快速了解如何使用这个应用",autoStart:!0,steps:[{id:"welcome-1",title:"欢迎！",description:"欢迎使用小说动漫生成器！这个应用可以帮助您将文字小说转换为动漫形式的视觉内容。让我们开始快速导览。",position:"center",nextLabel:"开始导览",canSkip:!0},{id:"welcome-2",title:"项目管理",description:"在仪表盘中您可以创建和管理您的项目。每个项目可以包含多个小说、角色和工作流。",route:"/dashboard",target:".workflow-guide",position:"right",nextLabel:"下一步"},{id:"welcome-3",title:"小说导入",description:'在仪表盘的快速开始区域，点击"选择文件"按钮可以导入您的小说文本文件。支持 .txt 和 .md 格式。',route:"/dashboard",target:".step-card",position:"bottom",nextLabel:"下一步"},{id:"welcome-4",title:"角色管理",description:"在角色管理页面，您可以定义小说中的角色信息，包括外貌、性格等。这些信息将用于生成角色形象。",route:"/characters",target:".character-list",position:"right",nextLabel:"下一步"},{id:"welcome-5",title:"工作流设计",description:"工作流编辑器让您可以自定义处理流程。通过拖拽节点来设计您的转换流程。",route:"/workflow",target:".workflow-canvas",position:"left",nextLabel:"下一步"},{id:"welcome-6",title:"完成！",description:"您已经了解了基本功能！现在可以开始创建您的第一个项目了。如需帮助，可以随时在设置中重新查看教程。",position:"center",nextLabel:"开始使用",canSkip:!1}]},workflow:{id:"workflow",name:"工作流编辑器教程",description:"学习如何设计和使用工作流",steps:[{id:"workflow-1",title:"节点库",description:"左侧是节点库，包含各种处理节点。您可以拖拽节点到画布上。",target:".node-library",position:"right",nextLabel:"下一步"},{id:"workflow-2",title:"画布",description:"中间是工作流画布。在这里排列和连接节点来设计处理流程。",target:".workflow-canvas",position:"top",nextLabel:"下一步"},{id:"workflow-3",title:"节点连接",description:"点击节点的输出端口，然后点击另一个节点的输入端口来创建连接。",target:".workflow-canvas",position:"top",nextLabel:"下一步"},{id:"workflow-4",title:"执行工作流",description:'设计完成后，点击"执行"按钮来运行工作流。您可以在执行监控面板查看进度。',target:".execute-button",position:"bottom",nextLabel:"完成"}]}},C="novel-anime-tutorial-state";function _(){try{const e=localStorage.getItem(C);if(e)return JSON.parse(e)}catch(e){console.error("Failed to load tutorial state:",e)}return{completedTutorials:[],skippedTutorials:[],showTutorials:!0}}function $(e){try{localStorage.setItem(C,JSON.stringify(e))}catch(o){console.error("Failed to save tutorial state:",o)}}const r=d(_()),a=d(null),i=d(0),L=d(!1);F(r,e=>{$(e)},{deep:!0});function V(){const e=Y(),o=l(()=>a.value&&a.value.steps[i.value]||null),p=l(()=>a.value?(i.value+1)/a.value.steps.length*100:0),v=l(()=>i.value<(a.value?.steps.length||0)-1),f=l(()=>i.value>0),T=l(()=>i.value===0),w=l(()=>i.value===(a.value?.steps.length||0)-1);function m(t){const u=b[t];if(!u){console.warn(`Tutorial not found: ${t}`);return}a.value=u,i.value=0,L.value=!0,r.value.currentTutorial=t,r.value.currentStep=0;const A=u.steps[0];A.route&&e.push(A.route)}async function g(){if(!a.value||!v.value)return;const t=o.value;t?.action&&await t.action(),i.value++,r.value.currentStep=i.value;const u=a.value.steps[i.value];u?.route&&e.push(u.route)}function n(){if(!f.value)return;i.value--,r.value.currentStep=i.value;const t=a.value?.steps[i.value];t?.route&&e.push(t.route)}function k(){if(!a.value)return;const t=a.value.id;r.value.skippedTutorials.includes(t)||r.value.skippedTutorials.push(t),S()}function G(){if(!a.value)return;const t=a.value.id;r.value.completedTutorials.includes(t)||r.value.completedTutorials.push(t),S()}function S(){a.value=null,i.value=0,L.value=!1,r.value.currentTutorial=void 0,r.value.currentStep=void 0}function M(t){r.value.completedTutorials=r.value.completedTutorials.filter(u=>u!==t),r.value.skippedTutorials=r.value.skippedTutorials.filter(u=>u!==t)}function R(){r.value.completedTutorials=[],r.value.skippedTutorials=[],r.value.showTutorials=!0}function x(t){return r.value.completedTutorials.includes(t)}function y(t){return r.value.skippedTutorials.includes(t)}function E(){return r.value.showTutorials}function N(t){r.value.showTutorials=t}function P(){return Object.values(b)}function J(t){return b[t]}function K(){E()&&!x("welcome")&&!y("welcome")&&m("welcome")}return{isActive:L,activeTutorial:a,currentStep:o,currentStepIndex:i,progress:p,canGoNext:v,canGoPrev:f,isFirstStep:T,isLastStep:w,startTutorial:m,nextStep:g,prevStep:n,skipTutorial:k,completeTutorial:G,endTutorial:S,resetTutorial:M,resetAllTutorials:R,isTutorialCompleted:x,isTutorialSkipped:y,shouldShowTutorials:E,setShowTutorials:N,getAllTutorials:P,getTutorial:J,autoStartWelcomeTutorial:K}}const D="novel-anime-theme",s=d("auto"),c=d("light"),h=l(()=>s.value==="auto"?c.value:s.value),j=l(()=>h.value==="dark");function z(){try{const e=localStorage.getItem(D);if(e&&["light","dark","auto"].includes(e))return e}catch(e){console.error("Failed to load theme:",e)}return"auto"}function Q(e){try{localStorage.setItem(D,e)}catch(o){console.error("Failed to save theme:",o)}}function U(){return window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"}function I(e){const o=document.documentElement;e==="dark"?(o.classList.add("dark"),o.setAttribute("data-theme","dark")):(o.classList.remove("dark"),o.setAttribute("data-theme","light")),window.dispatchEvent(new CustomEvent("theme-change",{detail:{theme:e}}))}function W(){if(!window.matchMedia)return;const e=window.matchMedia("(prefers-color-scheme: dark)"),o=p=>{c.value=p.matches?"dark":"light"};return o(e),e.addEventListener?e.addEventListener("change",o):e.addListener(o),()=>{e.removeEventListener?e.removeEventListener("change",o):e.removeListener(o)}}function q(){function e(){s.value=z(),c.value=U(),W(),I(h.value),F(h,n=>{I(n)})}function o(n){s.value=n,Q(n)}function p(){s.value==="auto"?o(c.value==="dark"?"light":"dark"):o(s.value==="dark"?"light":"dark")}function v(){o("light")}function f(){o("dark")}function T(){o("auto")}function w(){return{theme:s.value,systemPreference:c.value}}function m(n){return{light:"浅色",dark:"深色",auto:"跟随系统"}[n]}function g(n){return{light:"sun",dark:"moon",auto:"monitor"}[n]}return{currentTheme:s,actualTheme:h,isDark:j,systemPreference:c,initTheme:e,setTheme:o,toggleTheme:p,setLightTheme:v,setDarkTheme:f,setAutoTheme:T,getThemeConfig:w,getThemeLabel:m,getThemeIcon:g}}let O=!1;function X(){if(!O){O=!0;const{initTheme:e}=q();e()}}export{q as a,X as b,V as u};
