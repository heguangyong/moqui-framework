import{vModelText as F}from"./vue.runtime.esm-bundler-tGj6Om4U.js";import{_ as N,u as V,b as D,c as I,d as Q,i as o}from"./_plugin-vue_export-helper-BFgqyxDe.js";import{r as h,d as T,j as u,k as a,l as t,p as n,q,s as y,u as r,v as i,x as c,y as p,A as P,F as A,z as U,B as j}from"./runtime-core.esm-bundler-8-XbLWPr.js";import"./pinia-Be3yrKEl.js";import"./preload-helper-CmsKOCeN.js";const E={class:"characters-panel"},M={class:"search-section"},G={class:"search-box"},H={class:"section"},J={class:"section-items"},K={class:"item-badge"},O={key:0,class:"item-badge"},W={key:0,class:"item-badge"},X={key:0,class:"item-badge"},Y={class:"section"},Z={class:"filter-options"},ee={class:"section section--characters"},te={class:"section-items"},se=["onClick"],le={class:"character-info"},ae={class:"character-name"},oe={class:"character-role"},ie={key:0,class:"empty-hint"},ne={__name:"CharactersPanel",setup(re){const z=V(),S=D();I();const k=Q();function C(){S.path!=="/characters"&&z.push("/characters")}const d=h(""),m=h(null),v=h(null),b=h(null),x=h([{id:"1",name:"李明",role:"主角",color:"#6a7a72",locked:!0},{id:"2",name:"王芳",role:"配角",color:"#7a8a9a",locked:!0},{id:"3",name:"张威",role:"配角",color:"#5a5a5a",locked:!1},{id:"4",name:"老陈",role:"龙套",color:"#9a9a9a",locked:!1}]);function f(l){return x.value.filter(e=>e.role===l).length}const $=T(()=>{let l=x.value;if(d.value){const e=d.value.toLowerCase();l=l.filter(s=>s.name.toLowerCase().includes(e)||s.role.toLowerCase().includes(e))}return v.value!==null&&(l=l.filter(e=>e.role===v.value)),m.value!==null&&(l=l.filter(e=>e.locked===m.value)),l});function w(){C(),k.updatePanelContext("characters",{searchQuery:d.value})}function L(){d.value="",C(),k.updatePanelContext("characters",{searchQuery:""})}function g(l){m.value=l,C(),k.updatePanelContext("characters",{filterLocked:l})}function _(l){v.value=l,C(),k.updatePanelContext("characters",{filterRole:l})}function B(l){b.value=l.id,z.push(`/characters/${l.id}`)}function R(){C(),k.updatePanelContext("characters",{viewType:"new-character",selectedCharacter:null})}return(l,e)=>(a(),u("div",E,[t("div",M,[t("div",G,[(a(),n(r(i(o).search),{size:14,class:"search-icon"})),q(t("input",{type:"text",placeholder:"搜索角色...",class:"search-input","onUpdate:modelValue":e[0]||(e[0]=s=>d.value=s),onInput:w},null,544),[[F,d.value]]),d.value?(a(),u("button",{key:0,class:"search-clear",onClick:L},[(a(),n(r(i(o).x),{size:12}))])):y("",!0)])]),t("div",H,[e[12]||(e[12]=t("div",{class:"section-title"},"角色分类",-1)),t("div",J,[t("div",{class:c(["section-item",{"section-item--active":v.value===null}]),onClick:e[1]||(e[1]=s=>_(null))},[(a(),n(r(i(o).users),{size:16})),e[8]||(e[8]=t("span",null,"全部角色",-1)),t("span",K,p(x.value.length),1)],2),t("div",{class:c(["section-item",{"section-item--active":v.value==="主角"}]),onClick:e[2]||(e[2]=s=>_("主角"))},[(a(),n(r(i(o).star),{size:16})),e[9]||(e[9]=t("span",null,"主角",-1)),f("主角")>0?(a(),u("span",O,p(f("主角")),1)):y("",!0)],2),t("div",{class:c(["section-item",{"section-item--active":v.value==="配角"}]),onClick:e[3]||(e[3]=s=>_("配角"))},[(a(),n(r(i(o).user),{size:16})),e[10]||(e[10]=t("span",null,"配角",-1)),f("配角")>0?(a(),u("span",W,p(f("配角")),1)):y("",!0)],2),t("div",{class:c(["section-item",{"section-item--active":v.value==="龙套"}]),onClick:e[4]||(e[4]=s=>_("龙套"))},[(a(),n(r(i(o).circle),{size:16})),e[11]||(e[11]=t("span",null,"龙套",-1)),f("龙套")>0?(a(),u("span",X,p(f("龙套")),1)):y("",!0)],2)])]),t("div",Y,[e[15]||(e[15]=t("div",{class:"section-title"},"状态",-1)),t("div",Z,[t("div",{class:c(["filter-option",{"filter-option--active":m.value===null}]),onClick:e[5]||(e[5]=s=>g(null))}," 全部 ",2),t("div",{class:c(["filter-option",{"filter-option--active":m.value===!0}]),onClick:e[6]||(e[6]=s=>g(!0))},[(a(),n(r(i(o).lock),{size:12})),e[13]||(e[13]=P(" 已锁定 ",-1))],2),t("div",{class:c(["filter-option",{"filter-option--active":m.value===!1}]),onClick:e[7]||(e[7]=s=>g(!1))},[(a(),n(r(i(o).unlock),{size:12})),e[14]||(e[14]=P(" 未锁定 ",-1))],2)])]),t("div",ee,[t("div",{class:"section-header"},[e[16]||(e[16]=t("div",{class:"section-title"},"角色列表",-1)),t("span",{class:"add-btn",onClick:R},"+")]),t("div",te,[(a(!0),u(A,null,U($.value,s=>(a(),u("div",{key:s.id,class:c(["character-item",{"character-item--active":b.value===s.id}]),onClick:ce=>B(s)},[t("div",{class:"character-avatar",style:j({backgroundColor:s.color})},p(s.name.charAt(0)),5),t("div",le,[t("div",ae,p(s.name),1),t("div",oe,p(s.role),1)]),(a(),n(r(s.locked?i(o).lock:i(o).unlock),{size:14,class:c(["character-lock",{"character-lock--locked":s.locked}])},null,8,["class"]))],10,se))),128)),$.value.length===0?(a(),u("div",ie," 暂无角色 ")):y("",!0)])])]))}},fe=N(ne,[["__scopeId","data-v-8825d946"]]);export{fe as default};
