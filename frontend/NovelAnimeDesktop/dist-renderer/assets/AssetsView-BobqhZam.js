import{_ as E,i as p,u as te,d as ae,e as ne}from"./_plugin-vue_export-helper-BFgqyxDe.js";import{j as d,k as t,l as e,p as $,u as h,v as _,F as S,z as q,y as c,r as w,d as D,s as B,x as ee,q as Y,A as R,B as oe,C as se,K as le,D as x}from"./runtime-core.esm-bundler-8-XbLWPr.js";import{withModifiers as K,vModelText as Z,withKeys as ie}from"./vue.runtime.esm-bundler-tGj6Om4U.js";import"./pinia-Be3yrKEl.js";import"./preload-helper-CmsKOCeN.js";const de={class:"asset-grid"},re={key:0,class:"loading-state"},ue={key:1,class:"empty-state"},ce={key:2,class:"grid-container"},ve=["onClick","onDblclick"],me={class:"asset-thumbnail"},pe={class:"asset-info"},fe={class:"asset-name"},ge={class:"asset-size"},ye={__name:"AssetGrid",props:{assets:{type:Array,default:()=>[]},loading:{type:Boolean,default:!1}},emits:["select","preview"],setup(r){function M(g){return{image:p.image,audio:p.music,video:p.video,document:p.file}[g]||p.file}function I(g){if(!g)return"0 B";const u=1024,v=["B","KB","MB","GB"],i=Math.floor(Math.log(g)/Math.log(u));return Math.round(g/Math.pow(u,i)*100)/100+" "+v[i]}return(g,u)=>(t(),d("div",de,[r.loading?(t(),d("div",re,[...u[0]||(u[0]=[e("div",{class:"spinner"},null,-1),e("span",null,"加载中...",-1)])])):r.assets.length===0?(t(),d("div",ue,[(t(),$(h(_(p).folder),{size:48})),u[1]||(u[1]=e("span",null,"暂无资源",-1))])):(t(),d("div",ce,[(t(!0),d(S,null,q(r.assets,v=>(t(),d("div",{key:v.id,class:"asset-card",onClick:i=>g.$emit("select",v),onDblclick:i=>g.$emit("preview",v)},[e("div",me,[(t(),$(h(M(v.type)),{size:32}))]),e("div",pe,[e("span",fe,c(v.name),1),e("span",ge,c(I(v.size)),1)])],40,ve))),128))]))]))}},V=E(ye,[["__scopeId","data-v-f3d5883c"]]),$e={class:"asset-detail"},we={class:"detail-content"},ke={class:"preview-area"},he={class:"info-section"},be={class:"info-grid"},Ae={class:"info-item"},ze={class:"info-value"},Ce={class:"info-item"},De={class:"info-value"},Me={class:"info-item"},_e={class:"info-value"},Be={class:"info-item"},Se={class:"info-value"},Ie={class:"actions-section"},Te={class:"btn btn--primary"},Pe={class:"btn btn--secondary"},Ue={class:"btn btn--danger"},je={__name:"AssetDetail",props:{asset:{type:Object,required:!0}},emits:["back"],setup(r){function M(v){return{image:p.image,audio:p.music,video:p.video,document:p.file}[v]||p.file}function I(v){return{image:"图片",audio:"音频",video:"视频",document:"文档"}[v]||v}function g(v){if(!v)return"0 B";const i=1024,k=["B","KB","MB","GB"],b=Math.floor(Math.log(v)/Math.log(i));return Math.round(v/Math.pow(i,b)*100)/100+" "+k[b]}function u(v){return v?new Date(v).toLocaleDateString("zh-CN",{year:"numeric",month:"long",day:"numeric"}):"-"}return(v,i)=>(t(),d("div",$e,[e("button",{class:"back-btn",onClick:i[0]||(i[0]=k=>v.$emit("back"))},[(t(),$(h(_(p).arrowLeft),{size:16})),i[1]||(i[1]=e("span",null,"返回",-1))]),e("div",we,[e("div",ke,[(t(),$(h(M(r.asset.type)),{size:64}))]),e("div",he,[i[6]||(i[6]=e("h3",{class:"section-title"},"基本信息",-1)),e("div",be,[e("div",Ae,[i[2]||(i[2]=e("span",{class:"info-label"},"文件名",-1)),e("span",ze,c(r.asset.name),1)]),e("div",Ce,[i[3]||(i[3]=e("span",{class:"info-label"},"类型",-1)),e("span",De,c(I(r.asset.type)),1)]),e("div",Me,[i[4]||(i[4]=e("span",{class:"info-label"},"大小",-1)),e("span",_e,c(g(r.asset.size)),1)]),e("div",Be,[i[5]||(i[5]=e("span",{class:"info-label"},"上传时间",-1)),e("span",Se,c(u(r.asset.createdAt)),1)])])]),e("div",Ie,[e("button",Te,[(t(),$(h(_(p).download),{size:16})),i[7]||(i[7]=e("span",null,"下载",-1))]),e("button",Pe,[(t(),$(h(_(p).edit),{size:16})),i[8]||(i[8]=e("span",null,"编辑",-1))]),e("button",Ue,[(t(),$(h(_(p).trash),{size:16})),i[9]||(i[9]=e("span",null,"删除",-1))])])])]))}},Fe=E(je,[["__scopeId","data-v-b51e7e53"]]),Le={class:"dialog-content"},We={class:"dialog-header"},xe={class:"dialog-body"},Ke={key:0,class:"file-info"},Ne={class:"file-preview"},Ve=["src"],Ee={class:"file-details"},Ge={key:1,class:"form-section"},Re={class:"form-group"},qe={class:"form-group"},Oe={class:"form-group"},Je={class:"tags-input"},He=["onClick"],Qe=["onKeydown"],Xe={key:2,class:"upload-progress"},Ye={class:"progress-bar"},Ze={key:3,class:"error-message"},es={class:"dialog-footer"},ss=["disabled"],ts={__name:"AssetUploadDialog",props:{projectId:{type:String,required:!0}},emits:["close","uploaded"],setup(r,{emit:M}){const I=r,g=M,u=w(null),v=w(null),i=w(!1),k=w(!1),b=w(0),A=w(null),T=w(null),f=w({name:"",description:"",tags:[]}),z=w(""),F=D(()=>u.value?.type.startsWith("image/")),m=D(()=>u.value&&f.value.name&&!k.value),n=()=>{T.value?.click()},C=l=>{const a=l.target.files[0];a&&N(a)},L=l=>{i.value=!1;const a=l.dataTransfer.files[0];a&&N(a)},N=l=>{if(l.size>50*1024*1024){A.value="文件大小不能超过 50MB";return}if(u.value=l,f.value.name=l.name.replace(/\.[^/.]+$/,""),A.value=null,l.type.startsWith("image/")){const a=new FileReader;a.onload=o=>{v.value=o.target.result},a.readAsDataURL(l)}},U=()=>{u.value=null,v.value=null,f.value.name="",f.value.description="",f.value.tags=[],T.value&&(T.value.value="")},W=()=>{const l=z.value.trim();l&&!f.value.tags.includes(l)&&(f.value.tags.push(l),z.value="")},P=l=>{f.value.tags.splice(l,1)},j=async()=>{if(m.value){k.value=!0,b.value=0,A.value=null;try{const l=await O(u.value),a=J(u.value.type),o={projectId:I.projectId,userId:"current-user",assetType:a,name:f.value.name,description:f.value.description,fileContent:l,fileName:u.value.name,fileSize:u.value.size,mimeType:u.value.type,tags:f.value.tags},s=await fetch("/rest/s1/novel-anime/assets/upload",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(o)});if(s.ok)b.value=100,g("uploaded"),g("close");else{const y=await s.json();A.value=y.message||"上传失败"}}catch(l){console.error("Upload error:",l),A.value="上传失败："+l.message}finally{k.value=!1}}},O=l=>new Promise((a,o)=>{const s=new FileReader;s.onload=()=>{const y=s.result.split(",")[1];a(y)},s.onerror=o,s.readAsDataURL(l)}),J=l=>l.startsWith("image/")?"image":l.startsWith("audio/")?"audio":l.startsWith("video/")?"video":"document",H=()=>{if(!u.value)return"";const l=u.value.type;return l.startsWith("image/")?"图片":l.startsWith("audio/")?"音频":l.startsWith("video/")?"视频":"文档"},Q=()=>{if(!u.value)return"icon-file";const l=u.value.type;return l.startsWith("image/")?"icon-image":l.startsWith("audio/")?"icon-music":l.startsWith("video/")?"icon-video":"icon-file"},G=l=>{if(!l)return"0 B";const a=1024,o=["B","KB","MB","GB"],s=Math.floor(Math.log(l)/Math.log(a));return Math.round(l/Math.pow(a,s)*100)/100+" "+o[s]};return(l,a)=>(t(),d("div",{class:"dialog-overlay",onClick:a[7]||(a[7]=K(o=>l.$emit("close"),["self"]))},[e("div",Le,[e("div",We,[a[9]||(a[9]=e("h3",null,"上传素材",-1)),e("button",{class:"close-btn",onClick:a[0]||(a[0]=o=>l.$emit("close"))},[...a[8]||(a[8]=[e("i",{class:"icon-close"},null,-1)])])]),e("div",xe,[e("div",{class:ee(["upload-area",{dragging:i.value}]),onDrop:K(L,["prevent"]),onDragover:a[1]||(a[1]=K(o=>i.value=!0,["prevent"])),onDragleave:a[2]||(a[2]=K(o=>i.value=!1,["prevent"])),onClick:n},[a[10]||(a[10]=e("i",{class:"icon-upload"},null,-1)),a[11]||(a[11]=e("p",null,"拖拽文件到此处或点击选择",-1)),a[12]||(a[12]=e("p",{class:"hint"},"支持图片、音频、视频和文档",-1)),e("input",{ref_key:"fileInput",ref:T,type:"file",accept:"image/*,audio/*,video/*,.pdf,.txt,.doc,.docx",style:{display:"none"},onChange:C},null,544)],34),u.value?(t(),d("div",Ke,[e("div",Ne,[v.value&&F.value?(t(),d("img",{key:0,src:v.value,alt:"预览"},null,8,Ve)):(t(),d("i",{key:1,class:ee([Q(),"file-icon"])},null,2))]),e("div",Ee,[e("h4",null,c(u.value.name),1),e("p",null,c(G(u.value.size)),1),e("p",null,c(H()),1)]),e("button",{class:"remove-btn",onClick:U},[...a[13]||(a[13]=[e("i",{class:"icon-close"},null,-1)])])])):B("",!0),u.value?(t(),d("div",Ge,[e("div",Re,[a[14]||(a[14]=e("label",null,"素材名称 *",-1)),Y(e("input",{"onUpdate:modelValue":a[3]||(a[3]=o=>f.value.name=o),type:"text",placeholder:"输入素材名称",required:""},null,512),[[Z,f.value.name]])]),e("div",qe,[a[15]||(a[15]=e("label",null,"描述",-1)),Y(e("textarea",{"onUpdate:modelValue":a[4]||(a[4]=o=>f.value.description=o),placeholder:"输入素材描述（可选）",rows:"3"},null,512),[[Z,f.value.description]])]),e("div",Oe,[a[16]||(a[16]=e("label",null,"标签",-1)),e("div",Je,[(t(!0),d(S,null,q(f.value.tags,(o,s)=>(t(),d("span",{key:s,class:"tag"},[R(c(o)+" ",1),e("button",{onClick:y=>P(s)},"×",8,He)]))),128)),Y(e("input",{"onUpdate:modelValue":a[5]||(a[5]=o=>z.value=o),type:"text",placeholder:"添加标签...",onKeydown:ie(K(W,["prevent"]),["enter"])},null,40,Qe),[[Z,z.value]])])])])):B("",!0),k.value?(t(),d("div",Xe,[e("div",Ye,[e("div",{class:"progress-fill",style:oe({width:b.value+"%"})},null,4)]),e("p",null,"上传中... "+c(b.value)+"%",1)])):B("",!0),A.value?(t(),d("div",Ze,[a[17]||(a[17]=e("i",{class:"icon-alert"},null,-1)),R(" "+c(A.value),1)])):B("",!0)]),e("div",es,[e("button",{class:"btn btn-secondary",onClick:a[6]||(a[6]=o=>l.$emit("close"))}," 取消 "),e("button",{class:"btn btn-primary",disabled:!m.value,onClick:j},[...a[18]||(a[18]=[e("i",{class:"icon-upload"},null,-1),R(" 上传 ",-1)])],8,ss)])])]))}},as=E(ts,[["__scopeId","data-v-fd4cf11e"]]),ns={class:"dialog-content preview-dialog"},os={class:"dialog-header"},ls={class:"dialog-body"},is={key:0,class:"preview-container image-preview"},ds=["src","alt"],rs={key:1,class:"preview-container audio-preview"},us=["src"],cs={key:2,class:"preview-container video-preview"},vs=["src"],ms={key:3,class:"preview-container document-preview"},ps={class:"asset-details"},fs={class:"detail-section"},gs={class:"detail-row"},ys={class:"value"},$s={class:"detail-row"},ws={class:"value"},ks={class:"detail-row"},hs={class:"value"},bs={key:0,class:"detail-row"},As={class:"value"},zs={class:"detail-row"},Cs={class:"value"},Ds={key:0,class:"detail-section"},Ms={key:0,class:"detail-row"},_s={class:"value"},Bs={key:1,class:"detail-row"},Ss={class:"value"},Is={key:2,class:"detail-row"},Ts={class:"value"},Ps={key:3,class:"detail-row"},Us={class:"value"},js={class:"dialog-footer"},Fs={__name:"AssetPreviewDialog",props:{asset:{type:Object,required:!0}},emits:["close"],setup(r,{emit:M}){const I=r,g=M,u=w(null),v=w(null),i=m=>`/rest/s1/novel-anime/asset-file/${m}`,k=m=>({image:"图片",audio:"音频",video:"视频",document:"文档"})[m]||m,b=m=>{if(!m)return"0 B";const n=1024,C=["B","KB","MB","GB"],L=Math.floor(Math.log(m)/Math.log(n));return Math.round(m/Math.pow(n,L)*100)/100+" "+C[L]},A=m=>m?new Date(m).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"}):"-",T=m=>{if(!m)return"-";const n=Math.floor(m/60),C=Math.floor(m%60);return`${n}:${C.toString().padStart(2,"0")}`},f=m=>{m.target.src="/placeholder-image.png"},z=()=>{const m=i(I.asset.path),n=document.createElement("a");n.href=m,n.download=I.asset.name,n.click()},F=m=>{m.key==="Escape"&&g("close")};return se(()=>{document.addEventListener("keydown",F)}),le(()=>{document.removeEventListener("keydown",F),u.value&&u.value.pause(),v.value&&v.value.pause()}),(m,n)=>(t(),d("div",{class:"dialog-overlay",onClick:n[2]||(n[2]=K(C=>m.$emit("close"),["self"]))},[e("div",ns,[e("div",os,[e("h3",null,c(r.asset.name),1),e("button",{class:"close-btn",onClick:n[0]||(n[0]=C=>m.$emit("close"))},[...n[3]||(n[3]=[e("i",{class:"icon-close"},null,-1)])])]),e("div",ls,[r.asset.type==="image"?(t(),d("div",is,[e("img",{src:i(r.asset.path),alt:r.asset.name,onError:f},null,40,ds)])):r.asset.type==="audio"?(t(),d("div",rs,[n[4]||(n[4]=e("div",{class:"audio-icon"},[e("i",{class:"icon-music"})],-1)),e("audio",{ref_key:"audioPlayer",ref:u,controls:"",src:i(r.asset.path)}," 您的浏览器不支持音频播放 ",8,us)])):r.asset.type==="video"?(t(),d("div",cs,[e("video",{ref_key:"videoPlayer",ref:v,controls:"",src:i(r.asset.path)}," 您的浏览器不支持视频播放 ",8,vs)])):(t(),d("div",ms,[n[5]||(n[5]=e("div",{class:"document-icon"},[e("i",{class:"icon-file"})],-1)),e("p",null,c(k(r.asset.type)),1),n[6]||(n[6]=e("p",{class:"hint"},"此类型文件不支持预览",-1))])),e("div",ps,[e("div",fs,[n[12]||(n[12]=e("h4",null,"基本信息",-1)),e("div",gs,[n[7]||(n[7]=e("span",{class:"label"},"名称:",-1)),e("span",ys,c(r.asset.name),1)]),e("div",$s,[n[8]||(n[8]=e("span",{class:"label"},"类型:",-1)),e("span",ws,c(k(r.asset.type)),1)]),e("div",ks,[n[9]||(n[9]=e("span",{class:"label"},"大小:",-1)),e("span",hs,c(b(r.asset.size)),1)]),r.asset.description?(t(),d("div",bs,[n[10]||(n[10]=e("span",{class:"label"},"描述:",-1)),e("span",As,c(r.asset.description),1)])):B("",!0),e("div",zs,[n[11]||(n[11]=e("span",{class:"label"},"上传时间:",-1)),e("span",Cs,c(A(r.asset.createdDate)),1)])]),r.asset.metadata?(t(),d("div",Ds,[n[17]||(n[17]=e("h4",null,"元数据",-1)),r.asset.metadata.dimensions?(t(),d("div",Ms,[n[13]||(n[13]=e("span",{class:"label"},"尺寸:",-1)),e("span",_s,c(r.asset.metadata.dimensions.width)+" × "+c(r.asset.metadata.dimensions.height),1)])):B("",!0),r.asset.metadata.duration?(t(),d("div",Bs,[n[14]||(n[14]=e("span",{class:"label"},"时长:",-1)),e("span",Ss,c(T(r.asset.metadata.duration)),1)])):B("",!0),r.asset.metadata.mimeType?(t(),d("div",Is,[n[15]||(n[15]=e("span",{class:"label"},"MIME类型:",-1)),e("span",Ts,c(r.asset.metadata.mimeType),1)])):B("",!0),r.asset.metadata.tags&&r.asset.metadata.tags.length>0?(t(),d("div",Ps,[n[16]||(n[16]=e("span",{class:"label"},"标签:",-1)),e("span",Us,[(t(!0),d(S,null,q(r.asset.metadata.tags,C=>(t(),d("span",{key:C,class:"tag"},c(C),1))),128))])])):B("",!0)])):B("",!0)])]),e("div",js,[e("button",{class:"btn btn-secondary",onClick:z},[...n[18]||(n[18]=[e("i",{class:"icon-download"},null,-1),R(" 下载 ",-1)])]),e("button",{class:"btn btn-primary",onClick:n[1]||(n[1]=C=>m.$emit("close"))}," 关闭 ")])])]))}},Ls=E(Fs,[["__scopeId","data-v-3e67c305"]]),Ws={class:"assets-view"},xs={class:"view-header"},Ks={class:"stats-section"},Ns={class:"stats-grid"},Vs={class:"stat-icon"},Es={class:"stat-info"},Gs={class:"stat-value"},Rs={class:"stat-icon"},qs={class:"stat-info"},Os={class:"stat-value"},Js={class:"stat-icon"},Hs={class:"stat-info"},Qs={class:"stat-value"},Xs={class:"stat-icon"},Ys={class:"stat-info"},Zs={class:"stat-value"},et={class:"recent-section"},st={key:0,class:"asset-list"},tt=["onClick"],at={class:"asset-icon"},nt={class:"asset-item-info"},ot={class:"asset-name"},lt={class:"asset-meta"},it={key:1,class:"content-placeholder"},dt={class:"upload-section"},rt={__name:"AssetsView",setup(r){te();const M=ae(),I=ne(),g=D(()=>M.panelContext.assets||{}),u=D(()=>g.value?.category),v=D(()=>g.value?.viewType),i=D(()=>g.value?.selectedAsset),k=w(!1),b=w(!1),A=w(null),T=w([]),f=w({imageCount:5,audioCount:4,videoCount:3,documentCount:2,totalSize:128*1024*1024}),z=w([{id:"a1",name:"主角立绘-正面",type:"image",size:2048e3,createdAt:new Date},{id:"a2",name:"主角立绘-侧面",type:"image",size:1856e3,createdAt:new Date},{id:"a3",name:"城市背景-白天",type:"image",size:4096e3,createdAt:new Date},{id:"a4",name:"城市背景-夜晚",type:"image",size:3584e3,createdAt:new Date},{id:"a5",name:"室内场景",type:"image",size:256e4,createdAt:new Date},{id:"a6",name:"背景音乐-主题曲",type:"audio",size:512e4,createdAt:new Date},{id:"a7",name:"背景音乐-战斗",type:"audio",size:4608e3,createdAt:new Date},{id:"a8",name:"音效-脚步声",type:"audio",size:256e3,createdAt:new Date},{id:"a9",name:"音效-门声",type:"audio",size:128e3,createdAt:new Date},{id:"a10",name:"片头动画",type:"video",size:2048e4,createdAt:new Date},{id:"a11",name:"过场动画1",type:"video",size:1536e4,createdAt:new Date},{id:"a12",name:"片尾动画",type:"video",size:18432e3,createdAt:new Date},{id:"a13",name:"剧本大纲",type:"document",size:51200,createdAt:new Date},{id:"a14",name:"角色设定",type:"document",size:102400,createdAt:new Date}]),F=D(()=>I.currentProject?.projectId),m=D(()=>z.value.filter(o=>o.type==="image")),n=D(()=>z.value.filter(o=>o.type==="audio")),C=D(()=>z.value.filter(o=>o.type==="video")),L=D(()=>z.value.filter(o=>o.type==="document")),N=D(()=>z.value.slice(0,5)),U=D(()=>i.value?z.value.find(o=>o.id===i.value):null);function W(o){M.updatePanelContext("assets",{category:o,viewType:"category",selectedAsset:null})}function P(o){M.updatePanelContext("assets",{selectedAsset:o.id,viewType:"asset-detail"})}function j(o){A.value=o}function O(){M.updatePanelContext("assets",{viewType:null,selectedAsset:null})}function J(){b.value=!0}function H(){b.value=!1}function Q(o){return{image:p.image,audio:p.music,video:p.video,document:p.file}[o]||p.file}function G(o){return{image:"图片",audio:"音频",video:"视频",document:"文档"}[o]||o}function l(o){if(!o)return"0 B";const s=1024,y=["B","KB","MB","GB"],X=Math.floor(Math.log(o)/Math.log(s));return Math.round(o/Math.pow(s,X)*100)/100+" "+y[X]}function a(o){return o?new Date(o).toLocaleDateString("zh-CN",{month:"short",day:"numeric"}):"-"}return se(()=>{T.value=z.value}),(o,s)=>(t(),d("div",Ws,[u.value==="all"?(t(),d(S,{key:0},[s[6]||(s[6]=e("div",{class:"view-header"},[e("h2",null,"全部资源"),e("p",null,"管理您的所有素材资源")],-1)),x(V,{assets:T.value,loading:k.value,onSelect:P,onPreview:j},null,8,["assets","loading"])],64)):u.value==="image"?(t(),d(S,{key:1},[s[7]||(s[7]=e("div",{class:"view-header"},[e("h2",null,"图片资源"),e("p",null,"角色立绘、场景背景、UI素材等")],-1)),x(V,{assets:m.value,loading:k.value,onSelect:P,onPreview:j},null,8,["assets","loading"])],64)):u.value==="audio"?(t(),d(S,{key:2},[s[8]||(s[8]=e("div",{class:"view-header"},[e("h2",null,"音频资源"),e("p",null,"背景音乐、音效、配音等")],-1)),x(V,{assets:n.value,loading:k.value,onSelect:P,onPreview:j},null,8,["assets","loading"])],64)):u.value==="video"?(t(),d(S,{key:3},[s[9]||(s[9]=e("div",{class:"view-header"},[e("h2",null,"视频资源"),e("p",null,"动画片段、过场动画等")],-1)),x(V,{assets:C.value,loading:k.value,onSelect:P,onPreview:j},null,8,["assets","loading"])],64)):u.value==="document"?(t(),d(S,{key:4},[s[10]||(s[10]=e("div",{class:"view-header"},[e("h2",null,"文档资源"),e("p",null,"剧本、设定文档等")],-1)),x(V,{assets:L.value,loading:k.value,onSelect:P,onPreview:j},null,8,["assets","loading"])],64)):v.value==="asset-detail"&&U.value?(t(),d(S,{key:5},[e("div",xs,[e("h2",null,c(U.value.name),1),e("p",null,c(G(U.value.type))+" · "+c(l(U.value.size)),1)]),x(Fe,{asset:U.value,onBack:O},null,8,["asset"])],64)):(t(),d(S,{key:6},[s[20]||(s[20]=e("div",{class:"view-header"},[e("h2",null,"资源库"),e("p",null,"管理项目中的所有素材资源")],-1)),e("div",Ks,[s[15]||(s[15]=e("h3",{class:"section-title"},"资源统计",-1)),e("div",Ns,[e("div",{class:"stat-card",onClick:s[0]||(s[0]=y=>W("image"))},[e("div",Vs,[(t(),$(h(_(p).image),{size:24}))]),e("div",Es,[e("span",Gs,c(f.value.imageCount||0),1),s[11]||(s[11]=e("span",{class:"stat-label"},"图片",-1))])]),e("div",{class:"stat-card",onClick:s[1]||(s[1]=y=>W("audio"))},[e("div",Rs,[(t(),$(h(_(p).music),{size:24}))]),e("div",qs,[e("span",Os,c(f.value.audioCount||0),1),s[12]||(s[12]=e("span",{class:"stat-label"},"音频",-1))])]),e("div",{class:"stat-card",onClick:s[2]||(s[2]=y=>W("video"))},[e("div",Js,[(t(),$(h(_(p).video),{size:24}))]),e("div",Hs,[e("span",Qs,c(f.value.videoCount||0),1),s[13]||(s[13]=e("span",{class:"stat-label"},"视频",-1))])]),e("div",{class:"stat-card",onClick:s[3]||(s[3]=y=>W("document"))},[e("div",Xs,[(t(),$(h(_(p).file),{size:24}))]),e("div",Ys,[e("span",Zs,c(f.value.documentCount||0),1),s[14]||(s[14]=e("span",{class:"stat-label"},"文档",-1))])])])]),e("div",et,[s[18]||(s[18]=e("h3",{class:"section-title"},"最近上传",-1)),N.value.length>0?(t(),d("div",st,[(t(!0),d(S,null,q(N.value,y=>(t(),d("div",{key:y.id,class:"asset-item",onClick:X=>P(y)},[e("div",at,[(t(),$(h(Q(y.type)),{size:16}))]),e("div",nt,[e("span",ot,c(y.name),1),e("span",lt,c(G(y.type))+" · "+c(a(y.createdAt)),1)]),(t(),$(h(_(p).chevronRight),{size:16,class:"asset-arrow"}))],8,tt))),128))])):(t(),d("div",it,[(t(),$(h(_(p).folder),{size:48})),s[16]||(s[16]=e("span",null,"暂无资源",-1)),s[17]||(s[17]=e("p",null,"点击上传按钮添加素材",-1))]))]),e("div",dt,[e("button",{class:"btn btn--primary btn--lg",onClick:J},[(t(),$(h(_(p).upload),{size:18})),s[19]||(s[19]=e("span",null,"上传素材",-1))])])],64)),b.value?(t(),$(as,{key:7,"project-id":F.value,onClose:s[4]||(s[4]=y=>b.value=!1),onUploaded:H},null,8,["project-id"])):B("",!0),A.value?(t(),$(Ls,{key:8,asset:A.value,onClose:s[5]||(s[5]=y=>A.value=null)},null,8,["asset"])):B("",!0)]))}},ft=E(rt,[["__scopeId","data-v-3f055cb4"]]);export{ft as default};
