import{_ as V,i,b as A,u as E,c as N,e as I}from"./_plugin-vue_export-helper-BFgqyxDe.js";import{V as P}from"./ViewHeader-DsFMPudV.js";import{d as g,j as o,k as a,l as e,s as h,p as c,u,y as n,H as R,r as S,w as X,C as F,D as H,E as U,v,B as $,A as m,x as q,F as w,z as L}from"./runtime-core.esm-bundler-8-XbLWPr.js";import"./pinia-Be3yrKEl.js";import"./preload-helper-CmsKOCeN.js";const G={class:"empty-state"},J={class:"empty-icon"},K={key:0,class:"empty-title"},O={key:1,class:"empty-description"},Q={key:2,class:"empty-action"},W={__name:"EmptyState",props:{icon:{type:String,default:"inbox"},title:{type:String,default:""},description:{type:String,default:""},actionText:{type:String,default:""},size:{type:String,default:"medium",validator:r=>["small","medium","large"].includes(r)}},emits:["action"],setup(r){const _=r,f=g(()=>({inbox:i.inbox,folder:i.folder,file:i.file,search:i.search,users:i.users,image:i.image,video:i.video,book:i.book,workflow:i.gitBranch,settings:i.settings,clock:i.clock,archive:i.archive,layers:i.layers,circle:i.circle,refresh:i.refresh,box:i.box,userX:i.userX})[_.icon]||i.inbox),k=g(()=>({small:32,medium:48,large:64})[_.size]);return(d,t)=>(a(),o("div",G,[e("div",J,[(a(),c(u(f.value),{size:k.value},null,8,["size"]))]),r.title?(a(),o("h3",K,n(r.title),1)):h("",!0),r.description?(a(),o("p",O,n(r.description),1)):h("",!0),d.$slots.action||r.actionText?(a(),o("div",Q,[R(d.$slots,"action",{},()=>[r.actionText?(a(),o("button",{key:0,class:"action-btn",onClick:t[0]||(t[0]=b=>d.$emit("action"))},n(r.actionText),1)):h("",!0)])])):h("",!0)]))}},Y=V(W,[["__scopeId","data-v-10c598e6"]]),Z={class:"character-detail-view"},ee={key:0,class:"detail-content"},te={class:"info-card"},se={class:"card-header"},ae={class:"avatar-section"},ie={key:0,class:"locked-badge"},oe={class:"basic-info"},ne={class:"character-name"},le={class:"character-description"},ce={class:"detail-grid"},re={class:"detail-card"},de={class:"card-title"},ue={class:"tags-container"},pe={key:0,class:"empty-text"},ve={class:"detail-card"},me={class:"card-title"},he={class:"card-content"},_e={class:"detail-card"},fe={class:"card-title"},ke={class:"stats-grid"},ge={class:"stat-item"},be={class:"stat-value"},ye={class:"stat-item"},Ce={class:"stat-value"},ze={class:"detail-card detail-card--wide"},xe={class:"card-title"},Se={class:"relationships"},$e={key:0,class:"relationship-list"},we={class:"rel-info"},Le={class:"rel-name"},Ve={class:"rel-type"},Be={key:1,class:"empty-text"},Te={class:"action-buttons"},je={key:1,class:"loading-state"},De={__name:"CharacterDetailView",setup(r){const _=A(),f=E();N();const k=I(),d=S(!0),t=S(null),b=[{id:"1",name:"李明",role:"protagonist",description:"故事的主角，一个勇敢而善良的年轻人，在逆境中不断成长",tags:["勇敢","善良","正义","坚韧"],color:"#7a9188",appearances:45,scenes:12,appearance:"黑色短发，身材高大，眼神坚定，常穿深色外套",isLocked:!0},{id:"2",name:"王芳",role:"supporting",description:"主角的青梅竹马，聪明伶俐，是主角最信任的伙伴",tags:["聪明","温柔","坚强","细心"],color:"#8a9cad",appearances:32,scenes:8,appearance:"长发飘飘，面容清秀，笑容温暖",isLocked:!0},{id:"3",name:"张威",role:"antagonist",description:"故事的反派，野心勃勃，为达目的不择手段",tags:["狡猾","野心","冷酷","精明"],color:"#6a6a6a",appearances:18,scenes:6,appearance:"面容阴沉，眼神锐利，穿着考究",isLocked:!1},{id:"4",name:"老陈",role:"minor",description:"村里的老人，见多识广，常给主角提供智慧建议",tags:["智慧","和蔼","经验丰富"],color:"#a9adab",appearances:8,scenes:3,appearance:"白发苍苍，慈眉善目",isLocked:!1}],y=g(()=>t.value?{1:[{id:"2",name:"王芳",relationship:"青梅竹马",color:"#8a9cad"},{id:"3",name:"张威",relationship:"宿敌",color:"#6a6a6a"},{id:"4",name:"老陈",relationship:"师徒",color:"#a9adab"}],2:[{id:"1",name:"李明",relationship:"青梅竹马",color:"#7a9188"}],3:[{id:"1",name:"李明",relationship:"宿敌",color:"#7a9188"}],4:[{id:"1",name:"李明",relationship:"师徒",color:"#7a9188"}]}[t.value.id]||[]:[]);function C(){d.value=!0,t.value=null;const p=_.params.id;if(!p){d.value=!1;return}setTimeout(()=>{if(k.currentProject?.characters){const l=k.currentProject.characters.find(M=>M.id===p);if(l){t.value={...l},d.value=!1;return}}const s=b.find(l=>l.id===p);s&&(t.value={...s}),d.value=!1},200)}function z(p){return{protagonist:"主角",supporting:"配角",antagonist:"反派",minor:"龙套"}[p]||p||"未知"}function x(){f.push("/characters")}function B(){f.push("/characters")}function T(){confirm(`确定要删除角色 "${t.value?.name}" 吗？`)&&f.push("/characters")}function j(){t.value&&(t.value.isLocked=!0)}function D(){t.value&&(t.value.isLocked=!1)}return X(()=>_.params.id,p=>{p&&C()},{immediate:!0}),F(()=>{C()}),(p,s)=>(a(),o("div",Z,[H(P,{title:t.value?.name||"角色详情",subtitle:z(t.value?.role)},{actions:U(()=>[t.value&&!t.value.isLocked?(a(),o("button",{key:0,class:"action-btn action-btn--lock",onClick:j},[(a(),c(u(v(i).lock),{size:16})),s[0]||(s[0]=e("span",null,"锁定档案",-1))])):t.value?(a(),o("button",{key:1,class:"action-btn action-btn--unlock",onClick:D},[(a(),c(u(v(i).unlock),{size:16})),s[1]||(s[1]=e("span",null,"解锁档案",-1))])):h("",!0),e("button",{class:"action-btn",onClick:x},[(a(),c(u(v(i).arrowLeft),{size:16})),s[2]||(s[2]=e("span",null,"返回列表",-1))])]),_:1},8,["title","subtitle"]),t.value?(a(),o("div",ee,[e("div",te,[e("div",se,[e("div",ae,[e("div",{class:"avatar-large",style:$({background:t.value.color})},n(t.value.name.charAt(0)),5),t.value.isLocked?(a(),o("div",ie,[(a(),c(u(v(i).lock),{size:12})),s[3]||(s[3]=m(" 已锁定 ",-1))])):h("",!0)]),e("div",oe,[e("h2",ne,n(t.value.name),1),e("div",{class:q(["character-role-badge",`role--${t.value.role}`])},n(z(t.value.role)),3),e("p",le,n(t.value.description||"暂无描述"),1)])])]),e("div",ce,[e("div",re,[e("div",de,[(a(),c(u(v(i).tag),{size:16})),s[4]||(s[4]=m(" 性格特点 ",-1))]),e("div",ue,[(a(!0),o(w,null,L(t.value.tags,l=>(a(),o("span",{key:l,class:"tag"},n(l),1))),128)),t.value.tags?.length?h("",!0):(a(),o("span",pe,"暂无标签"))])]),e("div",ve,[e("div",me,[(a(),c(u(v(i).user),{size:16})),s[5]||(s[5]=m(" 外貌特征 ",-1))]),e("p",he,n(t.value.appearance||"暂无描述"),1)]),e("div",_e,[e("div",fe,[(a(),c(u(v(i).barChart),{size:16})),s[6]||(s[6]=m(" 出场统计 ",-1))]),e("div",ke,[e("div",ge,[e("span",be,n(t.value.appearances||0),1),s[7]||(s[7]=e("span",{class:"stat-label"},"出场次数",-1))]),e("div",ye,[e("span",Ce,n(t.value.scenes||0),1),s[8]||(s[8]=e("span",{class:"stat-label"},"关联场景",-1))])])]),e("div",ze,[e("div",xe,[(a(),c(u(v(i).users),{size:16})),s[9]||(s[9]=m(" 角色关系 ",-1))]),e("div",Se,[y.value.length?(a(),o("div",$e,[(a(!0),o(w,null,L(y.value,l=>(a(),o("div",{key:l.id,class:"relationship-item"},[e("div",{class:"rel-avatar",style:$({background:l.color})},n(l.name.charAt(0)),5),e("div",we,[e("span",Le,n(l.name),1),e("span",Ve,n(l.relationship),1)])]))),128))])):(a(),o("span",Be,"暂无关联角色"))])])]),e("div",Te,[e("button",{class:"btn btn--primary",onClick:B},[(a(),c(u(v(i).edit),{size:16})),s[10]||(s[10]=m(" 编辑角色 ",-1))]),e("button",{class:"btn btn--danger",onClick:T},[(a(),c(u(v(i).trash),{size:16})),s[11]||(s[11]=m(" 删除角色 ",-1))])])])):d.value?(a(),o("div",je,[...s[12]||(s[12]=[e("div",{class:"loading-spinner"},null,-1),e("span",null,"加载中...",-1)])])):(a(),c(Y,{key:2,icon:"userX",title:"未找到角色",description:"该角色不存在或已被删除",actionText:"返回角色列表",onAction:x}))]))}},Pe=V(De,[["__scopeId","data-v-56837b47"]]);export{Pe as default};
