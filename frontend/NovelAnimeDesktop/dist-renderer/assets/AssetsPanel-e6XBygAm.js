import{vModelText as N}from"./vue.runtime.esm-bundler-tGj6Om4U.js";import{_ as Q,u as T,b as V,c as R,d as U,i as a}from"./_plugin-vue_export-helper-BFgqyxDe.js";import{r as c,d as j,j as o,k as t,l as n,p as v,q,s as h,u as m,v as y,x as f,y as p,F as C,z as g}from"./runtime-core.esm-bundler-8-XbLWPr.js";import"./pinia-Be3yrKEl.js";import"./preload-helper-CmsKOCeN.js";const E={class:"assets-panel"},L={class:"search-section"},O={class:"search-box"},G={class:"section"},H={class:"section-items"},J={key:0,class:"item-badge"},K=["onClick"],W={key:0,class:"item-badge"},X={class:"section"},Y={class:"filter-tags"},Z=["onClick"],ee={class:"section section--recent"},se={class:"section-items"},te=["onClick"],ne={key:0,class:"empty-hint"},ie={__name:"AssetsPanel",setup(ae){const S=T(),B=V();R();const l=U();function u(){B.path!=="/assets"&&S.push("/assets")}const d=c(""),_=c(null),r=c([]),k=c(null),x=c([{id:"image",name:"图片",icon:a.image,count:5},{id:"audio",name:"音频",icon:a.music,count:4},{id:"video",name:"视频",icon:a.video,count:3},{id:"document",name:"文档",icon:a.file,count:2}]),A=j(()=>x.value.reduce((i,s)=>i+s.count,0)),F=c([{id:"recent",name:"最近添加"},{id:"used",name:"已使用"},{id:"unused",name:"未使用"}]),P=c([{id:"a1",name:"主角立绘",type:"character"},{id:"a2",name:"城市背景",type:"scene"},{id:"a3",name:"背景音乐1",type:"audio"}]);function $(i){return{character:a.users,scene:a.layers,image:a.image,audio:a.music,video:a.video}[i]||a.file}function w(){u(),l.updatePanelContext("assets",{searchQuery:d.value})}function D(){d.value="",u(),l.updatePanelContext("assets",{searchQuery:""})}function b(i){_.value=i.id,k.value=null,u(),l.updatePanelContext("assets",{category:i.id,viewType:"category",selectedAsset:null})}function I(i){const s=r.value.indexOf(i);s>-1?r.value.splice(s,1):r.value.push(i),u(),l.updatePanelContext("assets",{filters:[...r.value]})}function M(i){k.value=i.id,_.value=null,u(),l.updatePanelContext("assets",{selectedAsset:i.id,viewType:"asset-detail",category:i.type})}return(i,s)=>(t(),o("div",E,[n("div",L,[n("div",O,[(t(),v(m(y(a).search),{size:14,class:"search-icon"})),q(n("input",{type:"text",placeholder:"搜索资源...",class:"search-input","onUpdate:modelValue":s[0]||(s[0]=e=>d.value=e),onInput:w},null,544),[[N,d.value]]),d.value?(t(),o("button",{key:0,class:"search-clear",onClick:D},[(t(),v(m(y(a).x),{size:12}))])):h("",!0)])]),n("div",G,[s[3]||(s[3]=n("div",{class:"section-title"},"资源类型",-1)),n("div",H,[n("div",{class:f(["section-item",{"section-item--active":_.value==="all"}]),onClick:s[1]||(s[1]=e=>b({id:"all"}))},[(t(),v(m(y(a).grid),{size:16})),s[2]||(s[2]=n("span",null,"全部",-1)),A.value>0?(t(),o("span",J,p(A.value),1)):h("",!0)],2),(t(!0),o(C,null,g(x.value,e=>(t(),o("div",{key:e.id,class:f(["section-item",{"section-item--active":_.value===e.id}]),onClick:z=>b(e)},[(t(),v(m(e.icon),{size:16})),n("span",null,p(e.name),1),e.count>0?(t(),o("span",W,p(e.count),1)):h("",!0)],10,K))),128))])]),n("div",X,[s[4]||(s[4]=n("div",{class:"section-title"},"快速筛选",-1)),n("div",Y,[(t(!0),o(C,null,g(F.value,e=>(t(),o("span",{key:e.id,class:f(["filter-tag",{"filter-tag--active":r.value.includes(e.id)}]),onClick:z=>I(e.id)},p(e.name),11,Z))),128))])]),n("div",ee,[s[5]||(s[5]=n("div",{class:"section-title"},"最近使用",-1)),n("div",se,[(t(!0),o(C,null,g(P.value,e=>(t(),o("div",{key:e.id,class:f(["section-item",{"section-item--active":k.value===e.id}]),onClick:z=>M(e)},[(t(),v(m($(e.type)),{size:16})),n("span",null,p(e.name),1)],10,te))),128)),P.value.length===0?(t(),o("div",ne," 暂无最近使用 ")):h("",!0)])])]))}},re=Q(ie,[["__scopeId","data-v-59be8a8b"]]);export{re as default};
